{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/marceloimac/Documents/GitHub/JornadasApp/src/Sources/PagoEnLinea/PagoBono.js\";\nimport React, { useState } from \"react\";\nimport { WebView } from \"react-native-webview\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport { Icon } from \"react-native-elements\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport HeaderView from \"../../components/Layouts/Header\";\nimport Loading from \"../../Utils/Loading\";\nexport default function PagoBono(props) {\n  var navigation = useNavigation();\n  var transbank = props.route.params.transbank;\n  var orden_de_compra = props.route.params.orden_de_compra;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  console.log(orden_de_compra);\n\n  var handleWebViewNavigationStateChange = function handleWebViewNavigationStateChange(newNavState) {\n    var url = newNavState.url;\n    if (!url) return;\n\n    if (url.includes(\"voucher\")) {\n      setLoading(true);\n      setTimeout(function () {\n        setLoading(false);\n        navigation.navigate(\"Exito Bono\", {\n          orden_de_compra: orden_de_compra\n        });\n      }, 10000);\n    } else if (url.includes(\"fallido\")) {\n      setLoading(true);\n      setTimeout(function () {\n        setLoading(false);\n        navigation.navigate(\"Fallo Bono\", {\n          orden_de_compra: orden_de_compra\n        });\n      }, 3000);\n    }\n  };\n\n  if (transbank === null) {\n    return React.createElement(SafeAreaView, {\n      style: styles.mainView,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 7\n      }\n    }, React.createElement(HeaderView, {\n      props: props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }\n    }), React.createElement(WebView, {\n      source: {\n        uri: \"https://appjornadasmagallanicas.cl/api/api/retorno\"\n      },\n      onNavigationStateChange: handleWebViewNavigationStateChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }\n    }), React.createElement(View, {\n      style: styles.backContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate(\"Home\");\n      },\n      style: styles.comeBack,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }\n    }, React.createElement(Icon, {\n      raised: true,\n      name: \"arrow-left\",\n      type: \"font-awesome\",\n      color: \"#03255F\",\n      size: 15,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }))));\n  } else {\n    return React.createElement(SafeAreaView, {\n      style: styles.mainView,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      style: styles.HeaderContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }\n    }, React.createElement(HeaderView, {\n      props: props,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    })), React.createElement(View, {\n      style: styles.webviewContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }\n    }, React.createElement(WebView, {\n      source: {\n        uri: transbank.url + \"?token_ws=\" + transbank.token_ws\n      },\n      onNavigationStateChange: handleWebViewNavigationStateChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }\n    })), React.createElement(Loading, {\n      isVisible: loading,\n      text: \"Procesando pago...\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }));\n  }\n}\nvar styles = StyleSheet.create({\n  mainView: {\n    flex: 12\n  },\n  HeaderContainer: {\n    flex: 1\n  },\n  webviewContainer: {\n    flex: 10\n  },\n  backContainer: {\n    flex: 1,\n    backgroundColor: \"#03255f\"\n  },\n  comeBack: {\n    alignSelf: \"center\"\n  }\n});","map":{"version":3,"sources":["/Users/marceloimac/Documents/GitHub/JornadasApp/src/Sources/PagoEnLinea/PagoBono.js"],"names":["React","useState","WebView","Icon","useNavigation","HeaderView","Loading","PagoBono","props","navigation","transbank","route","params","orden_de_compra","loading","setLoading","console","log","handleWebViewNavigationStateChange","newNavState","url","includes","setTimeout","navigate","styles","mainView","uri","backContainer","comeBack","HeaderContainer","webviewContainer","token_ws","StyleSheet","create","flex","backgroundColor","alignSelf"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { WebView } from \"react-native-webview\";\nimport { View, TouchableOpacity, StyleSheet, SafeAreaView } from \"react-native\";\nimport { Icon } from \"react-native-elements\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport HeaderView from \"../../components/Layouts/Header\";\nimport Loading from \"../../Utils/Loading\";\n\nexport default function PagoBono(props) {\n  const navigation = useNavigation();\n  const transbank = props.route.params.transbank;\n  const orden_de_compra = props.route.params.orden_de_compra;\n  const [loading, setLoading] = useState(false);\n\n  console.log(orden_de_compra)\n  const handleWebViewNavigationStateChange = (newNavState) => {\n    const { url } = newNavState;\n    if (!url) return;\n\n    if (url.includes(\"voucher\")) {\n      setLoading(true);\n      setTimeout(() => {\n        setLoading(false);\n        navigation.navigate(\"Exito Bono\", {orden_de_compra: orden_de_compra});\n      }, 10000);\n    } else if (url.includes(\"fallido\")) {\n      setLoading(true);\n      setTimeout(() => {\n        setLoading(false);\n        navigation.navigate(\"Fallo Bono\", {orden_de_compra: orden_de_compra});\n      }, 3000);\n    }\n  };\n\n  if (transbank === null) {\n    return (\n      <SafeAreaView style={styles.mainView}>\n        <HeaderView props={props} />\n        <WebView\n          source={{ uri: \"https://appjornadasmagallanicas.cl/api/api/retorno\" }}\n          onNavigationStateChange={handleWebViewNavigationStateChange}\n        />\n        <View style={styles.backContainer}>\n          <TouchableOpacity\n            onPress={() => navigation.navigate(\"Home\")}\n            style={styles.comeBack}\n          >\n            <Icon\n              raised\n              name=\"arrow-left\"\n              type=\"font-awesome\"\n              color=\"#03255F\"\n              size={15}\n            />\n          </TouchableOpacity>\n        </View>\n      </SafeAreaView>\n    );\n  } else {\n    return (\n      <SafeAreaView style={styles.mainView}>\n        <View style={styles.HeaderContainer}>\n          <HeaderView props={props} />\n        </View>\n        <View style={styles.webviewContainer}>\n          <WebView\n            source={{\n              uri: `${transbank.url}?token_ws=${transbank.token_ws}`,\n            }}\n            onNavigationStateChange={handleWebViewNavigationStateChange}\n          />\n        </View>\n        <Loading isVisible={loading} text=\"Procesando pago...\" />\n      </SafeAreaView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  mainView: {\n    flex: 12,\n  },\n  HeaderContainer: {\n    flex: 1,\n  },\n  webviewContainer: {\n    flex: 10,\n  },\n  backContainer: {\n    flex: 1,\n    backgroundColor: \"#03255f\",\n  },\n  comeBack: {\n    alignSelf: \"center\",\n  },\n});\n"]},"metadata":{},"sourceType":"module"}