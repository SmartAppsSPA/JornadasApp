{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/marceloimac/Documents/GitHub/JornadasApp/src/Screens/Donar/DonarCompany.js\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport HeaderView from \"../../components/Layouts/Header\";\nimport usePreference from \"../../Hooks/usePreferences\";\nimport firebase from \"../../../Firebase/Firebase\";\nimport moment from \"moment\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { validateEmail } from \"../../Utils/validation\";\nimport { Input, Icon, CheckBox } from \"react-native-elements\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport Loading from \"../../Utils/Loading\";\nimport axios from \"axios\";\nimport AlcanciaImage from \"../../components/Layouts/AlcanciaImage\";\nexport default function DonarCompany(props) {\n  var toastRef = props.toastRef;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var navigation = useNavigation();\n\n  var _usePreference = usePreference(),\n      userFbData = _usePreference.userFbData;\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      formError = _useState4[0],\n      setFormError = _useState4[1];\n\n  var _useState5 = useState(userFbData.email),\n      _useState6 = _slicedToArray(_useState5, 2),\n      email = _useState6[0],\n      setEmail = _useState6[1];\n\n  var _useState7 = useState(userFbData.telefono),\n      _useState8 = _slicedToArray(_useState7, 2),\n      telefono = _useState8[0],\n      setTelefono = _useState8[1];\n\n  var _useState9 = useState(userFbData.representante),\n      _useState10 = _slicedToArray(_useState9, 2),\n      representante = _useState10[0],\n      setRepresentante = _useState10[1];\n\n  var _useState11 = useState(),\n      _useState12 = _slicedToArray(_useState11, 2),\n      aporte = _useState12[0],\n      setAporte = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      checked = _useState14[0],\n      setChecked = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      transbank = _useState16[0],\n      setTransbank = _useState16[1];\n\n  var _useState17 = useState(),\n      _useState18 = _slicedToArray(_useState17, 2),\n      numeroOrden = _useState18[0],\n      setNumeroOrden = _useState18[1];\n\n  useEffect(function () {\n    firebase.database().ref(\"Transbank\").orderByChild(\"numero\").limitToLast(1).on(\"value\", function (snapshot) {\n      setNumeroOrden(snapshot.val());\n      console.log(numeroOrden);\n    });\n  }, []);\n\n  var submit = function submit() {\n    var orderToArray = [];\n    var errors = [];\n\n    if (!aporte || !email.trim() || !telefono || !representante) {\n      toastRef.current.show(\"Todos Los Campos Son Obligatorios.\");\n      if (!aporte) errors.aporte = true;\n      if (!email.trim()) errors.email = true;\n      if (!telefono) errors.telefono = true;\n      if (!representante) errors.representante = true;\n    } else if (!validateEmail(email.trim())) {\n      toastRef.current.show(\"Correo electrónico incorrecto.\");\n      errors.email = true;\n    } else {\n      setLoading(true);\n      firebase.database().ref(\"Transbank\").orderByChild(\"numero\").limitToLast(1).on(\"value\", function (snapshot) {\n        setNumeroOrden(snapshot.val());\n      });\n\n      if (numeroOrden) {\n        console.log(numeroOrden);\n        Object.keys(numeroOrden).forEach(function (key, i) {\n          orderToArray[i] = numeroOrden[key];\n        });\n        var key = parseInt(orderToArray[0].numero_orden.split('-')[1]) + 1;\n        console.log(key);\n        firebase.database().ref().child(\"Transbank/orden_\" + key).set({\n          item: \"Aporte\",\n          tipo: \"Empresa\",\n          aporte: aporte,\n          nombre: userFbData.nombre,\n          rutEmpresa: userFbData.rutEmpresa,\n          email: email,\n          telefono: telefono,\n          representante: representante,\n          fecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n          numero_orden: 'JMAGALLANICAS-' + key,\n          numero: key,\n          estado_de_pago: \"Pendiente\",\n          uid: userFbData.uid,\n          certificado: checked,\n          plataforma: \"App\"\n        });\n        firebase.database().ref().child(\"Users/\" + userFbData.uid + \"/aportes/\" + key + \"/\").set({\n          aporte: aporte,\n          nombre: userFbData.nombre,\n          rutEmpresa: userFbData.rutEmpresa,\n          email: email,\n          telefono: telefono,\n          representante: representante,\n          fecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n          numero_orden: 'JMAGALLANICAS-' + key,\n          estado_de_pago: \"Pendiente\",\n          uid: userFbData.uid,\n          certificado: checked\n        });\n        firebase.database().ref().child(\"Donaciones/\" + key + \"/\").set({\n          tipo: \"Empresa\",\n          aporte: aporte,\n          nombre: userFbData.nombre,\n          rutEmpresa: userFbData.rutEmpresa,\n          email: email,\n          telefono: telefono,\n          representante: representante,\n          fecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n          numero_orden: 'JMAGALLANICAS-' + key,\n          estado_de_pago: \"Pendiente\",\n          uid: userFbData.uid,\n          certificado: checked,\n          plataforma: \"App\"\n        }).then(function (res) {\n          axios({\n            method: \"post\",\n            url: \"https://appjornadasmagallanicas.cl/api/api/transactions\",\n            data: {\n              orden_compra: 'JMAGALLANICAS-' + key,\n              sessionID: \"DonacionApp\",\n              monto: aporte,\n              cantidad: 1,\n              nombre: representante,\n              apellido: representante,\n              email: userFbData.email,\n              uid: userFbData.uid\n            }\n          }).then(function (response) {\n            setTransbank(response.data);\n            console.log(transbank);\n            navigation.navigate(\"Pago Aporte\", {\n              transbank: response.data,\n              orden_de_compra: key\n            });\n            setLoading(false);\n          });\n          handleReset();\n        }).catch(function (err) {\n          setLoading(false);\n          toastRef.current.show(\"Ha ocurrido un problema, intente nuevamente.\");\n        });\n      } else {\n        setLoading(false);\n        console.log(\"CATCH2\");\n        toastRef.current.show(\"Ha ocurrido un problema, intente nuevamente.\");\n      }\n    }\n\n    setFormError(errors);\n  };\n\n  var handleReset = function handleReset() {\n    setEmail(userFbData.email);\n    setTelefono(userFbData.telefono);\n    setRepresentante(userFbData.representante);\n    setAporte(\"\");\n    setChecked(false);\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: styles.headerContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 4\n    }\n  }, React.createElement(HeaderView, {\n    props: props,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 5\n    }\n  })), React.createElement(View, {\n    style: styles.imageContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 4\n    }\n  }, React.createElement(AlcanciaImage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 5\n    }\n  })), React.createElement(View, {\n    style: styles.titleContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 4\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 5\n    }\n  }, \"Aporte Empresa\")), React.createElement(View, {\n    style: styles.inputContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 4\n    }\n  }, React.createElement(Text, {\n    style: styles.inputTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 5\n    }\n  }, \"Correo Electr\\xF3nico \"), React.createElement(Input, {\n    name: \"email\",\n    containerStyle: styles.input,\n    inputStyle: styles.inputText,\n    inputContainerStyle: styles.inputUnderContainer,\n    autoCapitalize: \"none\",\n    placeholder: \"ejemplo@empresa.com...\",\n    defaultValue: email,\n    onChange: function onChange(e) {\n      return setEmail(e.nativeEvent.text);\n    },\n    rightIcon: formError.email ? React.createElement(Icon, {\n      type: \"font-awesome\",\n      name: \"exclamation-circle\",\n      color: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 8\n      }\n    }) : React.createElement(Icon, {\n      type: \"Fontawesome5\",\n      name: \"edit\",\n      iconStyle: styles.iconRight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 8\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 5\n    }\n  }), React.createElement(Text, {\n    style: styles.inputTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 5\n    }\n  }, \"Tel\\xE9fono de Contacto\"), React.createElement(Input, {\n    name: \"telefono\",\n    containerStyle: styles.input,\n    inputStyle: styles.inputText,\n    inputContainerStyle: styles.inputUnderContainer,\n    autoCapitalize: \"none\",\n    placeholder: \"+56 9 1111 1111...\",\n    defaultValue: telefono,\n    keyboardType: \"phone-pad\",\n    keyboardAppearance: \"dark\",\n    onChange: function onChange(e) {\n      return setTelefono(e.nativeEvent.text);\n    },\n    rightIcon: formError.telefono ? React.createElement(Icon, {\n      type: \"font-awesome\",\n      name: \"exclamation-circle\",\n      color: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 8\n      }\n    }) : React.createElement(Icon, {\n      type: \"Fontawesome5\",\n      name: \"edit\",\n      iconStyle: styles.iconRight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228,\n        columnNumber: 8\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 5\n    }\n  }), React.createElement(Text, {\n    style: styles.inputTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 5\n    }\n  }, \"Nombre De Contacto\"), React.createElement(Input, {\n    name: \"representante\",\n    containerStyle: styles.input,\n    inputStyle: styles.inputText,\n    inputContainerStyle: styles.inputUnderContainer,\n    autoCapitalize: \"none\",\n    textContentType: \"nickname\",\n    placeholder: \"fran.. zun...\",\n    defaultValue: representante,\n    onChange: function onChange(e) {\n      return setRepresentante(e.nativeEvent.text);\n    },\n    rightIcon: formError.representante ? React.createElement(Icon, {\n      type: \"font-awesome\",\n      name: \"exclamation-circle\",\n      color: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 8\n      }\n    }) : React.createElement(Icon, {\n      type: \"Fontawesome5\",\n      name: \"edit\",\n      iconStyle: styles.iconRight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 8\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 5\n    }\n  }), React.createElement(Text, {\n    style: styles.inputTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 5\n    }\n  }, \"Aporte\"), React.createElement(Input, {\n    name: \"aporte\",\n    containerStyle: styles.input,\n    inputStyle: styles.inputText,\n    inputContainerStyle: styles.inputUnderContainer,\n    autoCapitalize: \"none\",\n    placeholder: \"Ingrese su Aporte...\",\n    keyboardType: \"numeric\",\n    defaultValue: aporte,\n    onChange: function onChange(e) {\n      return setAporte(e.nativeEvent.text);\n    },\n    rightIcon: formError.aporte ? React.createElement(Icon, {\n      type: \"font-awesome\",\n      name: \"exclamation-circle\",\n      color: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 8\n      }\n    }) : React.createElement(Icon, {\n      type: \"Fontawesome5\",\n      name: \"edit\",\n      iconStyle: styles.iconRight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 8\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 5\n    }\n  }), React.createElement(CheckBox, {\n    center: true,\n    title: \"Solicitar certificado de donaci\\xF3n. \",\n    onPress: function onPress() {\n      return setChecked(!checked);\n    },\n    checked: checked,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 5\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return handleReset(userFbData);\n    },\n    style: styles.buttonFormReset,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 4\n    }\n  }, React.createElement(Text, {\n    style: styles.formReset,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 5\n    }\n  }, \"Reiniciar Formulario\")), React.createElement(View, {\n    style: styles.submitContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 4\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: submit,\n    style: styles.buttonPagar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.textSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 6\n    }\n  }, \"Donar\"))), React.createElement(View, {\n    style: styles.backContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 4\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate(\"Home\");\n    },\n    style: styles.comeBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 5\n    }\n  }, React.createElement(Icon, {\n    raised: true,\n    name: \"arrow-left\",\n    type: \"font-awesome\",\n    color: \"#03255F\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 6\n    }\n  }))), React.createElement(Loading, {\n    isVisible: loading,\n    text: \"Procesando\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 4\n    }\n  }));\n}\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 11\n  },\n  headerContainer: {\n    flex: 1\n  },\n  imageContainer: {\n    flex: 2\n  },\n  titleContainer: {\n    flex: 1\n  },\n  inputContainer: {\n    flex: 5,\n    width: width,\n    alignItems: \"center\",\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: \"#34495E\",\n    backgroundColor: \"#A9B4C0\",\n    paddingVertical: 25\n  },\n  submitContainer: {\n    flex: 1\n  },\n  backContainer: {\n    flex: 1\n  },\n  title: {\n    fontSize: 20,\n    color: \"#03255F\",\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    margin: 5\n  },\n  inputTitle: {\n    fontSize: 15,\n    color: \"#03255F\",\n    fontWeight: \"bold\",\n    alignSelf: \"center\",\n    justifyContent: \"center\"\n  },\n  input: {\n    width: width * 0.75,\n    height: height * 0.05,\n    backgroundColor: \"#FFF\",\n    margin: 8,\n    borderRadius: 30,\n    borderWidth: 1,\n    borderColor: \"#34495E\"\n  },\n  inputText: {\n    fontSize: 12,\n    color: \"#03255F\",\n    fontWeight: \"bold\"\n  },\n  inputUnderContainer: {\n    borderBottomWidth: 0\n  },\n  iconRight: {\n    color: \"#c1c1c1\"\n  },\n  error: {\n    borderColor: \"#940c0c\",\n    borderWidth: 1,\n    borderBottomColor: \"#940c0c\",\n    borderBottomWidth: 1,\n    borderRadius: 5\n  },\n  textSubmit: {\n    fontSize: 17.5,\n    color: \"white\",\n    fontWeight: \"bold\"\n  },\n  buttonFormReset: {\n    flexDirection: \"row\",\n    width: width * 0.5,\n    height: height * 0.04,\n    marginTop: 20,\n    backgroundColor: \"#03255F\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    justifyContent: \"center\",\n    borderRadius: 20\n  },\n  formReset: {\n    fontSize: 15,\n    color: \"#FFF\",\n    fontWeight: \"bold\",\n    marginTop: -3\n  },\n  buttonPagar: {\n    width: width * 0.5,\n    height: height * 0.04,\n    backgroundColor: \"green\",\n    alignSelf: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    borderRadius: 20,\n    margin: 10\n  },\n  comeBack: {\n    alignSelf: \"flex-start\",\n    borderRadius: 25,\n    marginLeft: 15,\n    marginTop: -70,\n    position: \"absolute\"\n  }\n});","map":{"version":3,"sources":["/Users/marceloimac/Documents/GitHub/JornadasApp/src/Screens/Donar/DonarCompany.js"],"names":["React","useState","useEffect","HeaderView","usePreference","firebase","moment","useNavigation","validateEmail","Input","Icon","CheckBox","SafeAreaView","Loading","axios","AlcanciaImage","DonarCompany","props","toastRef","loading","setLoading","navigation","userFbData","formError","setFormError","email","setEmail","telefono","setTelefono","representante","setRepresentante","aporte","setAporte","checked","setChecked","transbank","setTransbank","numeroOrden","setNumeroOrden","database","ref","orderByChild","limitToLast","on","snapshot","val","console","log","submit","orderToArray","errors","trim","current","show","Object","keys","forEach","key","i","parseInt","numero_orden","split","child","set","item","tipo","nombre","rutEmpresa","fecha","format","numero","estado_de_pago","uid","certificado","plataforma","then","res","method","url","data","orden_compra","sessionID","monto","cantidad","apellido","response","navigate","orden_de_compra","handleReset","catch","err","styles","container","headerContainer","imageContainer","titleContainer","title","inputContainer","inputTitle","input","inputText","inputUnderContainer","e","nativeEvent","text","iconRight","buttonFormReset","formReset","submitContainer","buttonPagar","textSubmit","backContainer","comeBack","Dimensions","get","width","height","StyleSheet","create","flex","alignItems","borderRadius","borderWidth","borderColor","backgroundColor","paddingVertical","fontSize","color","fontWeight","textAlign","margin","alignSelf","justifyContent","borderBottomWidth","error","borderBottomColor","flexDirection","marginTop","marginLeft","position"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n\tView,\n\tText,\n\tTouchableOpacity,\n\tStyleSheet,\n\tDimensions,\n} from \"react-native\";\nimport HeaderView from \"../../components/Layouts/Header\";\nimport usePreference from \"../../Hooks/usePreferences\";\nimport firebase from \"../../../Firebase/Firebase\";\nimport moment from \"moment\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { validateEmail } from \"../../Utils/validation\";\nimport { Input, Icon, CheckBox } from \"react-native-elements\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport Loading from \"../../Utils/Loading\";\nimport axios from \"axios\";\nimport AlcanciaImage from \"../../components/Layouts/AlcanciaImage\";\n\nexport default function DonarCompany(props) {\n\tconst { toastRef } = props;\n\tconst [loading, setLoading] = useState(false);\n\tconst navigation = useNavigation();\n\tconst { userFbData } = usePreference();\n\tconst [formError, setFormError] = useState({});\n\tconst [email, setEmail] = useState(userFbData.email);\n\tconst [telefono, setTelefono] = useState(userFbData.telefono);\n\tconst [representante, setRepresentante] = useState(userFbData.representante);\n\tconst [aporte, setAporte] = useState();\n\tconst [checked, setChecked] = useState(false);\n\tconst [transbank, setTransbank] = useState(null);\n\tconst [numeroOrden, setNumeroOrden] = useState();\n\n\tuseEffect(() => {\n\t\tfirebase\n\t\t\t.database()\n\t\t\t.ref(\"Transbank\")\n\t\t\t.orderByChild(\"numero\")\n\t\t\t.limitToLast(1)\n\t\t\t.on(\"value\", (snapshot) => {\n\t\t\t\tsetNumeroOrden(snapshot.val());\n\t\t\t\tconsole.log(numeroOrden);\n\t\t\t});\n\t}, []);\n\n\tconst submit = () => {\n\t\tlet orderToArray = [];\n\t\tlet errors = [];\n\t\tif (!aporte || !email.trim() || !telefono || !representante) {\n\t\t\ttoastRef.current.show(\"Todos Los Campos Son Obligatorios.\");\n\t\t\tif (!aporte) errors.aporte = true;\n\t\t\tif (!email.trim()) errors.email = true;\n\t\t\tif (!telefono) errors.telefono = true;\n\t\t\tif (!representante) errors.representante = true;\n\t\t} else if (!validateEmail(email.trim())) {\n\t\t\ttoastRef.current.show(\"Correo electrónico incorrecto.\");\n\t\t\terrors.email = true;\n\t\t} else {\n\t\t\tsetLoading(true);\n\t\t\tfirebase\n\t\t\t\t.database()\n\t\t\t\t.ref(\"Transbank\")\n\t\t\t\t.orderByChild(\"numero\")\n\t\t\t\t.limitToLast(1)\n\t\t\t\t.on(\"value\", (snapshot) => {\n\t\t\t\t\tsetNumeroOrden(snapshot.val());\n\t\t\t\t});\n\t\t\tif (numeroOrden) {\n\t\t\t\tconsole.log(numeroOrden);\n\t\t\t\tObject.keys(numeroOrden).forEach((key, i) => {\n\t\t\t\t\torderToArray[i] = numeroOrden[key];\n\t\t\t\t});\n\t\t\t\tlet key = parseInt(orderToArray[0].numero_orden.split('-')[1]) + 1;\n\t\t\t\tconsole.log(key);\n\t\t\t\tfirebase\n\t\t\t\t\t.database()\n\t\t\t\t\t.ref()\n\t\t\t\t\t.child(`Transbank/orden_${key}`)\n\t\t\t\t\t.set({\n\t\t\t\t\t\titem: \"Aporte\",\n\t\t\t\t\t\ttipo: \"Empresa\",\n\t\t\t\t\t\taporte: aporte,\n\t\t\t\t\t\tnombre: userFbData.nombre,\n\t\t\t\t\t\trutEmpresa: userFbData.rutEmpresa,\n\t\t\t\t\t\temail: email,\n\t\t\t\t\t\ttelefono: telefono,\n\t\t\t\t\t\trepresentante: representante,\n\t\t\t\t\t\tfecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n\t\t\t\t\t\tnumero_orden:  'JMAGALLANICAS-' + key,\n\t\t\t\t\t\tnumero: key,\n\t\t\t\t\t\testado_de_pago: \"Pendiente\",\n\t\t\t\t\t\tuid: userFbData.uid,\n\t\t\t\t\t\tcertificado: checked,\n\t\t\t\t\t\tplataforma: \"App\",\n\t\t\t\t\t});\n\t\t\t\tfirebase\n\t\t\t\t\t.database()\n\t\t\t\t\t.ref()\n\t\t\t\t\t.child(`Users/${userFbData.uid}/aportes/${key}/`)\n\t\t\t\t\t.set({\n\t\t\t\t\t\taporte: aporte,\n\t\t\t\t\t\tnombre: userFbData.nombre,\n\t\t\t\t\t\trutEmpresa: userFbData.rutEmpresa,\n\t\t\t\t\t\temail: email,\n\t\t\t\t\t\ttelefono: telefono,\n\t\t\t\t\t\trepresentante: representante,\n\t\t\t\t\t\tfecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n\t\t\t\t\t\tnumero_orden:  'JMAGALLANICAS-' + key,\n\t\t\t\t\t\testado_de_pago: \"Pendiente\",\n\t\t\t\t\t\tuid: userFbData.uid,\n\t\t\t\t\t\tcertificado: checked,\n\t\t\t\t\t});\n\t\t\t\tfirebase\n\t\t\t\t\t.database()\n\t\t\t\t\t.ref()\n\t\t\t\t\t.child(`Donaciones/${key}/`)\n\t\t\t\t\t.set({\n\t\t\t\t\t\ttipo: \"Empresa\",\n\t\t\t\t\t\taporte: aporte,\n\t\t\t\t\t\tnombre: userFbData.nombre,\n\t\t\t\t\t\trutEmpresa: userFbData.rutEmpresa,\n\t\t\t\t\t\temail: email,\n\t\t\t\t\t\ttelefono: telefono,\n\t\t\t\t\t\trepresentante: representante,\n\t\t\t\t\t\tfecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n\t\t\t\t\t\tnumero_orden:  'JMAGALLANICAS-' + key,\n\t\t\t\t\t\testado_de_pago: \"Pendiente\",\n\t\t\t\t\t\tuid: userFbData.uid,\n\t\t\t\t\t\tcertificado: checked,\n\t\t\t\t\t\tplataforma: \"App\",\n\t\t\t\t\t})\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\t\t\turl: \"https://appjornadasmagallanicas.cl/api/api/transactions\",\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\torden_compra:  'JMAGALLANICAS-' + key,\n\t\t\t\t\t\t\t\tsessionID: \"DonacionApp\",\n\t\t\t\t\t\t\t\tmonto: aporte,\n\t\t\t\t\t\t\t\tcantidad: 1,\n\t\t\t\t\t\t\t\tnombre: representante,\n\t\t\t\t\t\t\t\tapellido: representante,\n\t\t\t\t\t\t\t\temail: userFbData.email,\n\t\t\t\t\t\t\t\tuid: userFbData.uid,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}).then((response) => {\n\t\t\t\t\t\t\tsetTransbank(response.data);\n\t\t\t\t\t\t\tconsole.log(transbank);\n\t\t\t\t\t\t\tnavigation.navigate(\"Pago Aporte\", { transbank: response.data, orden_de_compra: key });\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t\t\thandleReset();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\ttoastRef.current.show(\n\t\t\t\t\t\t\t\"Ha ocurrido un problema, intente nuevamente.\"\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetLoading(false);\n\t\t\t\tconsole.log(\"CATCH2\");\n\t\t\t\ttoastRef.current.show(\"Ha ocurrido un problema, intente nuevamente.\");\n\t\t\t}\n\t\t}\n\t\tsetFormError(errors);\n\t};\n\n\tconst handleReset = () => {\n\t\tsetEmail(userFbData.email);\n\t\tsetTelefono(userFbData.telefono);\n\t\tsetRepresentante(userFbData.representante);\n\t\tsetAporte(\"\");\n\t\tsetChecked(false);\n\t};\n\n\treturn (\n\t\t<SafeAreaView style={styles.container}>\n\t\t\t<View style={styles.headerContainer}>\n\t\t\t\t<HeaderView props={props} />\n\t\t\t</View>\n\t\t\t<View style={styles.imageContainer}>\n\t\t\t\t<AlcanciaImage />\n\t\t\t</View>\n\t\t\t<View style={styles.titleContainer}>\n\t\t\t\t<Text style={styles.title}>Aporte Empresa</Text>\n\t\t\t</View>\n\t\t\t<View style={styles.inputContainer}>\n\t\t\t\t<Text style={styles.inputTitle}>Correo Electrónico </Text>\n\t\t\t\t<Input\n\t\t\t\t\tname=\"email\"\n\t\t\t\t\tcontainerStyle={styles.input}\n\t\t\t\t\tinputStyle={styles.inputText}\n\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\tplaceholder=\"ejemplo@empresa.com...\"\n\t\t\t\t\tdefaultValue={email}\n\t\t\t\t\tonChange={(e) => setEmail(e.nativeEvent.text)}\n\t\t\t\t\trightIcon={\n\t\t\t\t\t\tformError.email ? (\n\t\t\t\t\t\t\t<Icon type=\"font-awesome\" name=\"exclamation-circle\" color=\"red\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ttype=\"Fontawesome5\"\n\t\t\t\t\t\t\t\tname=\"edit\"\n\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Text style={styles.inputTitle}>Teléfono de Contacto</Text>\n\t\t\t\t<Input\n\t\t\t\t\tname=\"telefono\"\n\t\t\t\t\tcontainerStyle={styles.input}\n\t\t\t\t\tinputStyle={styles.inputText}\n\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\tplaceholder=\"+56 9 1111 1111...\"\n\t\t\t\t\tdefaultValue={telefono}\n\t\t\t\t\tkeyboardType=\"phone-pad\"\n\t\t\t\t\tkeyboardAppearance=\"dark\"\n\t\t\t\t\tonChange={(e) => setTelefono(e.nativeEvent.text)}\n\t\t\t\t\trightIcon={\n\t\t\t\t\t\tformError.telefono ? (\n\t\t\t\t\t\t\t<Icon type=\"font-awesome\" name=\"exclamation-circle\" color=\"red\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ttype=\"Fontawesome5\"\n\t\t\t\t\t\t\t\tname=\"edit\"\n\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Text style={styles.inputTitle}>Nombre De Contacto</Text>\n\t\t\t\t<Input\n\t\t\t\t\tname=\"representante\"\n\t\t\t\t\tcontainerStyle={styles.input}\n\t\t\t\t\tinputStyle={styles.inputText}\n\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\ttextContentType=\"nickname\"\n\t\t\t\t\tplaceholder=\"fran.. zun...\"\n\t\t\t\t\tdefaultValue={representante}\n\t\t\t\t\tonChange={(e) => setRepresentante(e.nativeEvent.text)}\n\t\t\t\t\trightIcon={\n\t\t\t\t\t\tformError.representante ? (\n\t\t\t\t\t\t\t<Icon type=\"font-awesome\" name=\"exclamation-circle\" color=\"red\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ttype=\"Fontawesome5\"\n\t\t\t\t\t\t\t\tname=\"edit\"\n\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Text style={styles.inputTitle}>Aporte</Text>\n\t\t\t\t<Input\n\t\t\t\t\tname=\"aporte\"\n\t\t\t\t\tcontainerStyle={styles.input}\n\t\t\t\t\tinputStyle={styles.inputText}\n\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\tplaceholder=\"Ingrese su Aporte...\"\n\t\t\t\t\tkeyboardType=\"numeric\"\n\t\t\t\t\tdefaultValue={aporte}\n\t\t\t\t\tonChange={(e) => setAporte(e.nativeEvent.text)}\n\t\t\t\t\trightIcon={\n\t\t\t\t\t\tformError.aporte ? (\n\t\t\t\t\t\t\t<Icon type=\"font-awesome\" name=\"exclamation-circle\" color=\"red\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ttype=\"Fontawesome5\"\n\t\t\t\t\t\t\t\tname=\"edit\"\n\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<CheckBox\n\t\t\t\t\tcenter\n\t\t\t\t\ttitle=\"Solicitar certificado de donación. \"\n\t\t\t\t\tonPress={() => setChecked(!checked)}\n\t\t\t\t\tchecked={checked}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t\t<TouchableOpacity\n\t\t\t\tonPress={() => handleReset(userFbData)}\n\t\t\t\tstyle={styles.buttonFormReset}\n\t\t\t>\n\t\t\t\t<Text style={styles.formReset}>Reiniciar Formulario</Text>\n\t\t\t</TouchableOpacity>\n\t\t\t<View style={styles.submitContainer}>\n\t\t\t\t<TouchableOpacity onPress={submit} style={styles.buttonPagar}>\n\t\t\t\t\t<Text style={styles.textSubmit}>Donar</Text>\n\t\t\t\t</TouchableOpacity>\n\t\t\t</View>\n\t\t\t<View style={styles.backContainer}>\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tonPress={() => navigation.navigate(\"Home\")}\n\t\t\t\t\tstyle={styles.comeBack}\n\t\t\t\t>\n\t\t\t\t\t<Icon raised name=\"arrow-left\" type=\"font-awesome\" color=\"#03255F\" />\n\t\t\t\t</TouchableOpacity>\n\t\t\t</View>\n\t\t\t<Loading isVisible={loading} text=\"Procesando\" />\n\t\t</SafeAreaView>\n\t);\n}\n\nconst { width, height } = Dimensions.get(\"window\");\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tflex: 11,\n\t},\n\theaderContainer: {\n\t\tflex: 1,\n\t},\n\timageContainer: {\n\t\tflex: 2,\n\t},\n\ttitleContainer: {\n\t\tflex: 1,\n\t},\n\tinputContainer: {\n\t\tflex: 5,\n\t\twidth: width,\n\t\talignItems: \"center\",\n\t\tborderRadius: 20,\n\t\tborderWidth: 1,\n\t\tborderColor: \"#34495E\",\n\t\tbackgroundColor: \"#A9B4C0\",\n\t\tpaddingVertical: 25,\n\t},\n\tsubmitContainer: {\n\t\tflex: 1,\n\t},\n\tbackContainer: {\n\t\tflex: 1,\n\t},\n\ttitle: {\n\t\tfontSize: 20,\n\t\tcolor: \"#03255F\",\n\t\tfontWeight: \"bold\",\n\t\ttextAlign: \"center\",\n\t\tmargin: 5,\n\t},\n\tinputTitle: {\n\t\tfontSize: 15,\n\t\tcolor: \"#03255F\",\n\t\tfontWeight: \"bold\",\n\t\talignSelf: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\tinput: {\n\t\twidth: width * 0.75,\n\t\theight: height * 0.05,\n\t\tbackgroundColor: \"#FFF\",\n\t\tmargin: 8,\n\t\tborderRadius: 30,\n\t\tborderWidth: 1,\n\t\tborderColor: \"#34495E\",\n\t},\n\tinputText: {\n\t\tfontSize: 12,\n\t\tcolor: \"#03255F\",\n\t\tfontWeight: \"bold\",\n\t},\n\tinputUnderContainer: {\n\t\tborderBottomWidth: 0,\n\t},\n\ticonRight: {\n\t\tcolor: \"#c1c1c1\",\n\t},\n\terror: {\n\t\tborderColor: \"#940c0c\",\n\t\tborderWidth: 1,\n\t\tborderBottomColor: \"#940c0c\",\n\t\tborderBottomWidth: 1,\n\t\tborderRadius: 5,\n\t},\n\ttextSubmit: {\n\t\tfontSize: 17.5,\n\t\tcolor: \"white\",\n\t\tfontWeight: \"bold\",\n\t},\n\tbuttonFormReset: {\n\t\tflexDirection: \"row\",\n\t\twidth: width * 0.5,\n\t\theight: height * 0.04,\n\t\tmarginTop: 20,\n\t\tbackgroundColor: \"#03255F\",\n\t\talignItems: \"center\",\n\t\talignSelf: \"center\",\n\t\tjustifyContent: \"center\",\n\t\tborderRadius: 20,\n\t},\n\tformReset: {\n\t\tfontSize: 15,\n\t\tcolor: \"#FFF\",\n\t\tfontWeight: \"bold\",\n\t\tmarginTop: -3,\n\t},\n\tbuttonPagar: {\n\t\twidth: width * 0.5,\n\t\theight: height * 0.04,\n\t\tbackgroundColor: \"green\",\n\t\talignSelf: \"center\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t\tborderRadius: 20,\n\t\tmargin: 10,\n\t},\n\tcomeBack: {\n\t\talignSelf: \"flex-start\",\n\t\tborderRadius: 25,\n\t\tmarginLeft: 15,\n\t\tmarginTop: -70,\n\t\tposition: \"absolute\",\n\t},\n});\n"]},"metadata":{},"sourceType":"module"}