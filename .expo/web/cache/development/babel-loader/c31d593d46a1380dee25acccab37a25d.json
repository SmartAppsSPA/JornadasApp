{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Marcelo\\\\Documents\\\\JornadasApp\\\\JornadasApp\\\\src\\\\Screens\\\\Bono\\\\BonoUser.js\";\nimport React, { useState, useEffect } from \"react\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport HeaderView from \"../../components/Layouts/Header\";\nimport { numberFormat } from \"../../Sources/PagoEnLinea/FormatPrice\";\nimport usePreference from \"../../Hooks/usePreferences\";\nimport { validateEmail } from \"../../Utils/validation\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport firebase from \"../../../Firebase/Firebase\";\nimport moment from \"moment\";\nimport { Input, Icon } from \"react-native-elements\";\nimport BonoImage from \"../../components/Layouts/BonoImage\";\nimport Loading from \"../../Utils/Loading\";\nimport axios from \"axios\";\nimport { validarRUT } from \"validar-rut\";\nexport default function BonoUser(props) {\n  var toastRef = props.toastRef;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var navigation = useNavigation();\n\n  var _usePreference = usePreference(),\n      userFbData = _usePreference.userFbData;\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      formError = _useState4[0],\n      setFormError = _useState4[1];\n\n  var _useState5 = useState(1),\n      _useState6 = _slicedToArray(_useState5, 2),\n      cantidad = _useState6[0],\n      setCantidad = _useState6[1];\n\n  var _useState7 = useState(userFbData.nombre),\n      _useState8 = _slicedToArray(_useState7, 2),\n      nombre = _useState8[0],\n      setNombre = _useState8[1];\n\n  var _useState9 = useState(userFbData.apellido),\n      _useState10 = _slicedToArray(_useState9, 2),\n      apellido = _useState10[0],\n      setApellido = _useState10[1];\n\n  var _useState11 = useState(userFbData.telefono),\n      _useState12 = _slicedToArray(_useState11, 2),\n      telefono = _useState12[0],\n      setTelefono = _useState12[1];\n\n  var _useState13 = useState(undefined),\n      _useState14 = _slicedToArray(_useState13, 2),\n      rut = _useState14[0],\n      setRut = _useState14[1];\n\n  var _useState15 = useState(null),\n      _useState16 = _slicedToArray(_useState15, 2),\n      transbank = _useState16[0],\n      setTransbank = _useState16[1];\n\n  var _useState17 = useState(),\n      _useState18 = _slicedToArray(_useState17, 2),\n      numeroOrden = _useState18[0],\n      setNumeroOrden = _useState18[1];\n\n  var precio = 1000;\n  var precioTotal = precio * cantidad;\n  useEffect(function () {\n    firebase.database().ref(\"Transbank\").orderByChild(\"numero\").limitToLast(1).on(\"value\", function (snapshot) {\n      setNumeroOrden(snapshot.val());\n      console.log(numeroOrden);\n    });\n  }, []);\n\n  var handleCantidad = function handleCantidad(cantidad, max) {\n    if (cantidad >= 1) {\n      setCantidad(cantidad);\n    } else if (cantidad < 0) {\n      cantidad = 1;\n      setCantidad(cantidad);\n    } else if (cantidad >= max) {\n      cantidad = max;\n      setCantidad(cantidad);\n    }\n  };\n\n  var comprar = function comprar() {\n    var orderToArray = [];\n    var errors = {};\n\n    if (!nombre || !apellido || !telefono || !rut) {\n      toastRef.current.show(\"Todos Los Campos Son Obligatorios.\");\n      if (!nombre) errors.nombre = true;\n      if (!apellido) errors.apellido = true;\n      if (!telefono) errors.telefono = true;\n      if (!rut) errors.rut = true;\n    } else if (validarRUT(rut) === false) {\n      console.log(validarRUT(rut));\n      toastRef.current.show(\"Formato de Rut incorrecto.\");\n      errors.rut = true;\n    } else {\n      setLoading(true);\n      firebase.database().ref(\"Transbank\").orderByChild(\"numero\").limitToLast(1).on(\"value\", function (snapshot) {\n        setNumeroOrden(snapshot.val());\n      });\n\n      if (numeroOrden) {\n        console.log(numeroOrden);\n        Object.keys(numeroOrden).forEach(function (key, i) {\n          orderToArray[i] = numeroOrden[key];\n        });\n        var key = parseInt(orderToArray[0].numero_orden.split('-')[1]) + 1;\n        console.log(key);\n        firebase.database().ref().child(\"Transbank/orden_\" + key).set({\n          item: \"Bono\",\n          cantidad: cantidad,\n          tipo: \"Usuario\",\n          precio: precioTotal,\n          nombre: nombre,\n          apellido: apellido,\n          rut: rut,\n          telefono: telefono,\n          fecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n          numero_orden: 'JMAGALLANICAS-' + key,\n          numero: key,\n          estado_de_pago: \"Pendiente\",\n          uid: userFbData.uid,\n          plataforma: \"App\"\n        });\n        firebase.database().ref().child(\"Users/\" + userFbData.uid + \"/bonos/\" + key + \"/\").set({\n          total: precioTotal,\n          nombre: nombre,\n          apellido: apellido,\n          rut: rut,\n          telefono: telefono,\n          cantidad: cantidad,\n          numero_orden: 'JMAGALLANICAS-' + key,\n          fecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n          id: key,\n          estado_de_pago: \"Pendiente\",\n          uid: userFbData.uid\n        });\n        firebase.database().ref().child(\"Bono_digital/\" + key + \"/\").set({\n          tipo: \"Usuario\",\n          total: precioTotal,\n          nombre: nombre,\n          apellido: apellido,\n          rut: rut,\n          telefono: telefono,\n          cantidad: cantidad,\n          numero_orden: 'JMAGALLANICAS-' + key,\n          fecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n          id: key,\n          estado_de_pago: \"Pendiente\",\n          uid: userFbData.uid,\n          plataforma: \"App\"\n        }).then(function (res) {\n          axios({\n            method: \"post\",\n            url: \"https://appjornadasmagallanicas.cl/api/api/transactions\",\n            data: {\n              orden_compra: 'JMAGALLANICAS-' + key,\n              sessionID: \"BonoSorteoApp\",\n              monto: precioTotal,\n              cantidad: cantidad,\n              nombre: nombre,\n              apellido: apellido,\n              uid: userFbData.uid,\n              telefono: telefono\n            }\n          }).then(function (response) {\n            setTransbank(response.data);\n            console.log(transbank);\n            navigation.navigate(\"Pago Bono\", {\n              transbank: response.data,\n              orden_de_compra: key\n            });\n            setLoading(false);\n          });\n          handleReset();\n        }).catch(function (err) {\n          setLoading(false);\n          toastRef.current.show(\"Ha ocurrido un problema, intente nuevamente.\");\n        });\n      } else {\n        setLoading(false);\n        toastRef.current.show(\"Ha ocurrido un problema, intente nuevamente.\");\n      }\n    }\n\n    setFormError(errors);\n  };\n\n  var handleReset = function handleReset() {\n    setCantidad(1);\n    setNombre(userFbData.nombre);\n    setApellido(userFbData.apellido);\n    setEmail(userFbData.email);\n    setTelefono(userFbData.telefono);\n  };\n\n  if (userFbData) {\n    return React.createElement(SafeAreaView, {\n      style: styles.container,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 4\n      }\n    }, React.createElement(View, {\n      style: styles.headerContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 5\n      }\n    }, React.createElement(HeaderView, {\n      props: props,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 6\n      }\n    })), React.createElement(View, {\n      style: styles.imageContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 5\n      }\n    }, React.createElement(BonoImage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 6\n      }\n    })), React.createElement(View, {\n      style: styles.titleContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      style: styles.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 6\n      }\n    }, \"Bono Sorteo Parcela\")), React.createElement(View, {\n      style: styles.inputContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      style: styles.inputTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 6\n      }\n    }, \"Nombre(s)\"), React.createElement(Input, {\n      name: \"nombre\",\n      containerStyle: styles.input,\n      inputStyle: styles.inputText,\n      inputContainerStyle: styles.inputUnderContainer,\n      autoCapitalize: \"none\",\n      textContentType: \"name\",\n      placeholder: \"Fran... \",\n      defaultValue: nombre,\n      rightIcon: formError.nombre ? React.createElement(Icon, {\n        type: \"font-awesome\",\n        name: \"exclamation-circle\",\n        color: \"red\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 9\n        }\n      }) : React.createElement(Icon, {\n        type: \"Fontawesome5\",\n        name: \"edit\",\n        iconStyle: styles.iconRight,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 9\n        }\n      }),\n      onChange: function onChange(e) {\n        return setNombre(e.nativeEvent.text);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 6\n      }\n    }), React.createElement(Text, {\n      style: styles.inputTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 6\n      }\n    }, \"Apellido(s)\"), React.createElement(Input, {\n      name: \"apellido\",\n      containerStyle: styles.input,\n      inputStyle: styles.inputText,\n      inputContainerStyle: styles.inputUnderContainer,\n      autoCapitalize: \"none\",\n      textContentType: \"middleName\",\n      placeholder: \"Zun... \",\n      defaultValue: apellido,\n      rightIcon: formError.apellido ? React.createElement(Icon, {\n        type: \"font-awesome\",\n        name: \"exclamation-circle\",\n        color: \"red\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 9\n        }\n      }) : React.createElement(Icon, {\n        type: \"font-awesome-5\",\n        name: \"edit\",\n        iconStyle: styles.iconRight,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 9\n        }\n      }),\n      onChange: function onChange(e) {\n        return setApellido(e.nativeEvent.text);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 6\n      }\n    }), React.createElement(Text, {\n      style: styles.inputTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 6\n      }\n    }, \"Rut\"), React.createElement(Input, {\n      name: \"apellido\",\n      containerStyle: styles.input,\n      inputStyle: styles.inputText,\n      inputContainerStyle: styles.inputUnderContainer,\n      autoCapitalize: \"none\",\n      textContentType: \"postalCode\",\n      placeholder: \"11.111.111-1 \",\n      defaultValue: rut,\n      rightIcon: formError.rut ? React.createElement(Icon, {\n        type: \"font-awesome\",\n        name: \"exclamation-circle\",\n        color: \"red\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 9\n        }\n      }) : React.createElement(Icon, {\n        type: \"font-awesome-5\",\n        name: \"edit\",\n        iconStyle: styles.iconRight,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 9\n        }\n      }),\n      onChange: function onChange(e) {\n        return setRut(e.nativeEvent.text);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 6\n      }\n    }), React.createElement(Text, {\n      style: styles.inputTitle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 6\n      }\n    }, \"Tel\\xE9fono de Contacto\"), React.createElement(Input, {\n      name: \"telefono\",\n      containerStyle: styles.input,\n      inputStyle: styles.inputText,\n      inputContainerStyle: styles.inputUnderContainer,\n      autoCapitalize: \"none\",\n      placeholder: \"+56 9 1111 1111...\",\n      defaultValue: telefono,\n      keyboardType: \"phone-pad\",\n      keyboardAppearance: \"dark\",\n      onChange: function onChange(e) {\n        return setTelefono(e.nativeEvent.text);\n      },\n      rightIcon: formError.telefono ? React.createElement(Icon, {\n        type: \"font-awesome\",\n        name: \"exclamation-circle\",\n        color: \"red\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 9\n        }\n      }) : React.createElement(Icon, {\n        type: \"Fontawesome5\",\n        name: \"edit\",\n        iconStyle: styles.iconRight,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 9\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 6\n      }\n    })), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return handleReset();\n      },\n      style: styles.buttonFormReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      style: styles.formReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 6\n      }\n    }, \"Reiniciar Formulario\")), React.createElement(View, {\n      style: styles.quantityContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 5\n      }\n    }, React.createElement(Text, {\n      style: styles.title,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 6\n      }\n    }, \"Cantidad\"), React.createElement(View, {\n      style: styles.quantity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 6\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return handleCantidad(cantidad - 1);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 7\n      }\n    }, React.createElement(Icon, {\n      type: \"material-community\",\n      name: \"minus-circle\",\n      color: \"white\",\n      size: 35,\n      iconStyle: styles.less,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 8\n      }\n    })), React.createElement(Text, {\n      style: styles.numero,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 7\n      }\n    }, cantidad), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return handleCantidad(cantidad + 1);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 7\n      }\n    }, React.createElement(Icon, {\n      type: \"material-community\",\n      name: \"plus-circle\",\n      color: \"white\",\n      size: 35,\n      iconStyle: styles.plus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 8\n      }\n    }))), React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return setCantidad(1);\n      },\n      style: styles.buttonReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 6\n      }\n    }, React.createElement(Text, {\n      style: styles.textReset,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 7\n      }\n    }, \"Reiniciar\"))), React.createElement(View, {\n      style: styles.submitContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 5\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: comprar,\n      style: styles.buttonPagar,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 6\n      }\n    }, React.createElement(Text, {\n      style: styles.bonoSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 7\n      }\n    }, numberFormat(precioTotal), \" Comprar\"))), React.createElement(View, {\n      style: styles.backContainer,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 5\n      }\n    }, React.createElement(TouchableOpacity, {\n      onPress: function onPress() {\n        return navigation.navigate(\"Home\");\n      },\n      style: styles.comeBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 6\n      }\n    }, React.createElement(Icon, {\n      raised: true,\n      name: \"arrow-left\",\n      type: \"font-awesome\",\n      color: \"#03255F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 7\n      }\n    }))), React.createElement(Loading, {\n      isVisible: loading,\n      text: \"Procesando pago\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 5\n      }\n    }));\n  }\n}\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 14\n  },\n  headerContainer: {\n    flex: 1\n  },\n  imageContainer: {\n    flex: 3\n  },\n  titleContainer: {\n    flex: 1\n  },\n  inputContainer: {\n    flex: 5,\n    width: width,\n    alignItems: \"center\",\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: \"#34495E\",\n    backgroundColor: \"#A9B4C0\",\n    paddingVertical: 25\n  },\n  quantityContainer: {\n    flex: 2,\n    backgroundColor: \"#A9B4C0\",\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: \"#34495E\"\n  },\n  submitContainer: {\n    flex: 1\n  },\n  backContainer: {\n    flex: 1\n  },\n  bonoImagen: {\n    width: width * 0.99,\n    height: 200,\n    resizeMode: \"contain\",\n    borderRadius: 30,\n    alignSelf: \"center\",\n    justifyContent: \"center\",\n    marginTop: 3\n  },\n  title: {\n    fontSize: 20,\n    color: \"#03255F\",\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    margin: 5\n  },\n  inputTitle: {\n    fontSize: 15,\n    color: \"#03255F\",\n    fontWeight: \"bold\",\n    alignSelf: \"center\",\n    justifyContent: \"center\"\n  },\n  input: {\n    width: width * 0.75,\n    height: height * 0.05,\n    backgroundColor: \"#FFF\",\n    margin: 8,\n    borderRadius: 30,\n    borderWidth: 1,\n    borderColor: \"#34495E\"\n  },\n  inputText: {\n    fontSize: 12,\n    color: \"#03255F\",\n    fontWeight: \"bold\"\n  },\n  inputUnderContainer: {\n    borderBottomWidth: 0\n  },\n  iconRight: {\n    color: \"#c1c1c1\"\n  },\n  quantity: {\n    flexDirection: \"row\",\n    justifyContent: \"center\",\n    margin: 10\n  },\n  plus: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    color: \"#03255f\"\n  },\n  less: {\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    color: \"#03255f\"\n  },\n  numero: {\n    width: 75,\n    height: 50,\n    fontSize: 35,\n    color: \"#03255f\",\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    marginTop: -10,\n    justifyContent: \"center\",\n    borderRadius: 20,\n    borderWidth: 1,\n    backgroundColor: \"#ffffff\",\n    overflow: \"hidden\"\n  },\n  buttonReset: {\n    width: width * 0.5,\n    height: 25,\n    marginBottom: 10,\n    backgroundColor: \"#03255F\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    justifyContent: \"center\",\n    borderRadius: 30\n  },\n  textReset: {\n    fontSize: 15,\n    color: \"#FFF\",\n    fontWeight: \"bold\",\n    marginTop: -3\n  },\n  buttonFormReset: {\n    flexDirection: \"row\",\n    width: width * 0.5,\n    height: 25,\n    marginVertical: 10,\n    backgroundColor: \"#03255F\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    justifyContent: \"center\",\n    borderRadius: 20\n  },\n  formReset: {\n    color: \"#FFF\",\n    fontWeight: \"bold\",\n    marginTop: -3\n  },\n  bonoSubmit: {\n    fontSize: 17.5,\n    color: \"white\",\n    fontWeight: \"bold\"\n  },\n  buttonPagar: {\n    width: width * 0.5,\n    height: height * 0.03,\n    backgroundColor: \"green\",\n    alignSelf: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    borderRadius: 20,\n    margin: 20\n  },\n  comeBack: {\n    alignSelf: \"flex-start\",\n    borderRadius: 25,\n    marginLeft: 15,\n    marginTop: -65,\n    position: \"absolute\"\n  }\n});","map":{"version":3,"sources":["C:/Users/Marcelo/Documents/JornadasApp/JornadasApp/src/Screens/Bono/BonoUser.js"],"names":["React","useState","useEffect","HeaderView","numberFormat","usePreference","validateEmail","useNavigation","firebase","moment","Input","Icon","BonoImage","Loading","axios","validarRUT","BonoUser","props","toastRef","loading","setLoading","navigation","userFbData","formError","setFormError","cantidad","setCantidad","nombre","setNombre","apellido","setApellido","telefono","setTelefono","undefined","rut","setRut","transbank","setTransbank","numeroOrden","setNumeroOrden","precio","precioTotal","database","ref","orderByChild","limitToLast","on","snapshot","val","console","log","handleCantidad","max","comprar","orderToArray","errors","current","show","Object","keys","forEach","key","i","parseInt","numero_orden","split","child","set","item","tipo","fecha","format","numero","estado_de_pago","uid","plataforma","total","id","then","res","method","url","data","orden_compra","sessionID","monto","response","navigate","orden_de_compra","handleReset","catch","err","setEmail","email","styles","container","headerContainer","imageContainer","titleContainer","title","inputContainer","inputTitle","input","inputText","inputUnderContainer","iconRight","e","nativeEvent","text","buttonFormReset","formReset","quantityContainer","quantity","less","plus","buttonReset","textReset","submitContainer","buttonPagar","bonoSubmit","backContainer","comeBack","Dimensions","get","width","height","StyleSheet","create","flex","alignItems","borderRadius","borderWidth","borderColor","backgroundColor","paddingVertical","bonoImagen","resizeMode","alignSelf","justifyContent","marginTop","fontSize","color","fontWeight","textAlign","margin","borderBottomWidth","flexDirection","overflow","marginBottom","marginVertical","marginLeft","position"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n\tSafeAreaView,\r\n\tView,\r\n\tText,\r\n\tStyleSheet,\r\n\tTouchableOpacity,\r\n\tDimensions,\r\n} from \"react-native\";\r\nimport HeaderView from \"../../components/Layouts/Header\";\r\nimport { numberFormat } from \"../../Sources/PagoEnLinea/FormatPrice\";\r\nimport usePreference from \"../../Hooks/usePreferences\";\r\nimport { validateEmail } from \"../../Utils/validation\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport firebase from \"../../../Firebase/Firebase\";\r\nimport moment from \"moment\";\r\nimport { Input, Icon } from \"react-native-elements\";\r\nimport BonoImage from \"../../components/Layouts/BonoImage\";\r\nimport Loading from \"../../Utils/Loading\";\r\nimport axios from \"axios\";\r\nimport {validarRUT} from \"validar-rut\"\r\n\r\nexport default function BonoUser(props) {\r\n\tconst { toastRef } = props;\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst navigation = useNavigation();\r\n\tconst { userFbData } = usePreference();\r\n\tconst [formError, setFormError] = useState({});\r\n\tconst [cantidad, setCantidad] = useState(1);\r\n\tconst [nombre, setNombre] = useState(userFbData.nombre);\r\n\tconst [apellido, setApellido] = useState(userFbData.apellido);\r\n\tconst [telefono, setTelefono] = useState(userFbData.telefono);\r\n\tconst [rut, setRut] = useState(undefined);\r\n\tconst [transbank, setTransbank] = useState(null);\r\n\tconst [numeroOrden, setNumeroOrden] = useState();\r\n\tconst precio = 1000;\r\n\tconst precioTotal = precio * cantidad;\r\n\r\n\tuseEffect(() => {\r\n\t\tfirebase\r\n\t\t\t.database()\r\n\t\t\t.ref(\"Transbank\")\r\n\t\t\t.orderByChild(\"numero\")\r\n\t\t\t.limitToLast(1)\r\n\t\t\t.on(\"value\", (snapshot) => {\r\n\t\t\t\tsetNumeroOrden(snapshot.val());\r\n\t\t\t\tconsole.log(numeroOrden);\r\n\t\t\t});\r\n\t}, []);\r\n\r\n\tconst handleCantidad = (cantidad, max) => {\r\n\t\tif (cantidad >= 1) {\r\n\t\t\tsetCantidad(cantidad);\r\n\t\t} else if (cantidad < 0) {\r\n\t\t\tcantidad = 1;\r\n\t\t\tsetCantidad(cantidad);\r\n\t\t} else if (cantidad >= max) {\r\n\t\t\tcantidad = max;\r\n\t\t\tsetCantidad(cantidad);\r\n\t\t}\r\n\t};\r\n\r\n\tconst comprar = () => {\r\n\t\tlet orderToArray = [];\r\n\t\tlet errors = {};\r\n\t\tif (!nombre || !apellido || !telefono || !rut) {\r\n\t\t\ttoastRef.current.show(\"Todos Los Campos Son Obligatorios.\");\r\n\t\t\tif (!nombre) errors.nombre = true;\r\n\t\t\tif (!apellido) errors.apellido = true;\r\n\t\t\tif (!telefono) errors.telefono = true;\r\n\t\t\tif (!rut) errors.rut = true;\r\n\t\t}else if (validarRUT(rut) === false){\r\n\t\t\tconsole.log(validarRUT(rut))\r\n\t\t\ttoastRef.current.show(\"Formato de Rut incorrecto.\");\r\n\t\t\terrors.rut = true;\r\n\t\t}else {\r\n\t\t\tsetLoading(true);\r\n\t\t\tfirebase\r\n\t\t\t\t.database()\r\n\t\t\t\t.ref(\"Transbank\")\r\n\t\t\t\t.orderByChild(\"numero\")\r\n\t\t\t\t.limitToLast(1)\r\n\t\t\t\t.on(\"value\", (snapshot) => {\r\n\t\t\t\t\tsetNumeroOrden(snapshot.val());\r\n\t\t\t\t});\r\n\t\t\tif (numeroOrden) {\r\n\t\t\t\tconsole.log(numeroOrden);\r\n\t\t\t\tObject.keys(numeroOrden).forEach((key, i) => {\r\n\t\t\t\t\torderToArray[i] = numeroOrden[key];\r\n\t\t\t\t});\r\n\t\t\t\tlet key = parseInt(orderToArray[0].numero_orden.split('-')[1]) + 1;\r\n\t\t\t\tconsole.log(key);\r\n\t\t\t\tfirebase\r\n\t\t\t\t\t.database()\r\n\t\t\t\t\t.ref()\r\n\t\t\t\t\t.child(`Transbank/orden_${key}`)\r\n\t\t\t\t\t.set({\r\n\t\t\t\t\t\titem: \"Bono\",\r\n\t\t\t\t\t\tcantidad: cantidad,\r\n\t\t\t\t\t\ttipo: \"Usuario\",\r\n\t\t\t\t\t\tprecio: precioTotal,\r\n\t\t\t\t\t\tnombre: nombre,\r\n\t\t\t\t\t\tapellido: apellido,\r\n\t\t\t\t\t\trut: rut,\r\n\t\t\t\t\t\ttelefono: telefono,\r\n\t\t\t\t\t\tfecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\r\n\t\t\t\t\t\tnumero_orden:  'JMAGALLANICAS-' + key,\r\n\t\t\t\t\t\tnumero: key,\r\n\t\t\t\t\t\testado_de_pago: \"Pendiente\",\r\n\t\t\t\t\t\tuid: userFbData.uid,\r\n\t\t\t\t\t\tplataforma: \"App\",\r\n\t\t\t\t\t});\r\n\t\t\t\tfirebase\r\n\t\t\t\t\t.database()\r\n\t\t\t\t\t.ref()\r\n\t\t\t\t\t.child(`Users/${userFbData.uid}/bonos/${key}/`)\r\n\t\t\t\t\t.set({\r\n\t\t\t\t\t\ttotal: precioTotal,\r\n\t\t\t\t\t\tnombre: nombre,\r\n\t\t\t\t\t\tapellido: apellido,\r\n\t\t\t\t\t\trut: rut,\r\n\t\t\t\t\t\ttelefono: telefono,\r\n\t\t\t\t\t\tcantidad: cantidad,\r\n\t\t\t\t\t\tnumero_orden:  'JMAGALLANICAS-' + key,\r\n\t\t\t\t\t\tfecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\r\n\t\t\t\t\t\tid: key,\r\n\t\t\t\t\t\testado_de_pago: \"Pendiente\",\r\n\t\t\t\t\t\tuid: userFbData.uid,\r\n\t\t\t\t\t});\r\n\t\t\t\tfirebase\r\n\t\t\t\t\t.database()\r\n\t\t\t\t\t.ref()\r\n\t\t\t\t\t.child(`Bono_digital/${key}/`)\r\n\t\t\t\t\t.set({\r\n\t\t\t\t\t\ttipo: \"Usuario\",\r\n\t\t\t\t\t\ttotal: precioTotal,\r\n\t\t\t\t\t\tnombre: nombre,\r\n\t\t\t\t\t\tapellido: apellido,\r\n\t\t\t\t\t\trut: rut,\r\n\t\t\t\t\t\ttelefono: telefono,\r\n\t\t\t\t\t\tcantidad: cantidad,\r\n\t\t\t\t\t\tnumero_orden:  'JMAGALLANICAS-' + key,\r\n\t\t\t\t\t\tfecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\r\n\t\t\t\t\t\tid: key,\r\n\t\t\t\t\t\testado_de_pago: \"Pendiente\",\r\n\t\t\t\t\t\tuid: userFbData.uid,\r\n\t\t\t\t\t\tplataforma: \"App\",\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\taxios({\r\n\t\t\t\t\t\t\tmethod: \"post\",\r\n\t\t\t\t\t\t\turl: \"https://appjornadasmagallanicas.cl/api/api/transactions\",\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\torden_compra:  'JMAGALLANICAS-' + key,\r\n\t\t\t\t\t\t\t\tsessionID: \"BonoSorteoApp\",\r\n\t\t\t\t\t\t\t\tmonto: precioTotal,\r\n\t\t\t\t\t\t\t\tcantidad: cantidad,\r\n\t\t\t\t\t\t\t\tnombre: nombre,\r\n\t\t\t\t\t\t\t\tapellido: apellido,\r\n\t\t\t\t\t\t\t\tuid: userFbData.uid,\r\n\t\t\t\t\t\t\t\ttelefono: telefono,\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t}).then((response) => {\r\n\t\t\t\t\t\t\tsetTransbank(response.data);\r\n\t\t\t\t\t\t\tconsole.log(transbank);\r\n\t\t\t\t\t\t\tnavigation.navigate(\"Pago Bono\", { transbank: response.data, orden_de_compra: key });\r\n\t\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\thandleReset();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\ttoastRef.current.show(\r\n\t\t\t\t\t\t\t\"Ha ocurrido un problema, intente nuevamente.\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tsetLoading(false);\r\n\t\t\t\ttoastRef.current.show(\"Ha ocurrido un problema, intente nuevamente.\");\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetFormError(errors);\r\n\t};\r\n\r\n\tconst handleReset = () => {\r\n\t\tsetCantidad(1);\r\n\t\tsetNombre(userFbData.nombre);\r\n\t\tsetApellido(userFbData.apellido);\r\n\t\tsetEmail(userFbData.email);\r\n\t\tsetTelefono(userFbData.telefono);\r\n\t};\r\n\r\n\tif (userFbData) {\r\n\t\treturn (\r\n\t\t\t<SafeAreaView style={styles.container}>\r\n\t\t\t\t<View style={styles.headerContainer}>\r\n\t\t\t\t\t<HeaderView props={props} />\r\n\t\t\t\t</View>\r\n\t\t\t\t<View style={styles.imageContainer}>\r\n\t\t\t\t\t<BonoImage />\r\n\t\t\t\t</View>\r\n\t\t\t\t<View style={styles.titleContainer}>\r\n\t\t\t\t\t<Text style={styles.title}>Bono Sorteo Parcela</Text>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View style={styles.inputContainer}>\r\n\t\t\t\t\t<Text style={styles.inputTitle}>Nombre(s)</Text>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tname=\"nombre\"\r\n\t\t\t\t\t\tcontainerStyle={styles.input}\r\n\t\t\t\t\t\tinputStyle={styles.inputText}\r\n\t\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\r\n\t\t\t\t\t\tautoCapitalize=\"none\"\r\n\t\t\t\t\t\ttextContentType=\"name\"\r\n\t\t\t\t\t\tplaceholder=\"Fran... \"\r\n\t\t\t\t\t\tdefaultValue={nombre}\r\n\t\t\t\t\t\trightIcon={\r\n\t\t\t\t\t\t\tformError.nombre ? (\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\ttype=\"font-awesome\"\r\n\t\t\t\t\t\t\t\t\tname=\"exclamation-circle\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\ttype=\"Fontawesome5\"\r\n\t\t\t\t\t\t\t\t\tname=\"edit\"\r\n\t\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={(e) => setNombre(e.nativeEvent.text)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Text style={styles.inputTitle}>Apellido(s)</Text>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tname=\"apellido\"\r\n\t\t\t\t\t\tcontainerStyle={styles.input}\r\n\t\t\t\t\t\tinputStyle={styles.inputText}\r\n\t\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\r\n\t\t\t\t\t\tautoCapitalize=\"none\"\r\n\t\t\t\t\t\ttextContentType=\"middleName\"\r\n\t\t\t\t\t\tplaceholder=\"Zun... \"\r\n\t\t\t\t\t\tdefaultValue={apellido}\r\n\t\t\t\t\t\trightIcon={\r\n\t\t\t\t\t\t\tformError.apellido ? (\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\ttype=\"font-awesome\"\r\n\t\t\t\t\t\t\t\t\tname=\"exclamation-circle\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\ttype=\"font-awesome-5\"\r\n\t\t\t\t\t\t\t\t\tname=\"edit\"\r\n\t\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={(e) => setApellido(e.nativeEvent.text)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Text style={styles.inputTitle}>Rut</Text>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tname=\"apellido\"\r\n\t\t\t\t\t\tcontainerStyle={styles.input}\r\n\t\t\t\t\t\tinputStyle={styles.inputText}\r\n\t\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\r\n\t\t\t\t\t\tautoCapitalize=\"none\"\r\n\t\t\t\t\t\ttextContentType=\"postalCode\"\r\n\t\t\t\t\t\tplaceholder=\"11.111.111-1 \"\r\n\t\t\t\t\t\tdefaultValue={rut}\r\n\t\t\t\t\t\trightIcon={\r\n\t\t\t\t\t\t\tformError.rut ? (\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\ttype=\"font-awesome\"\r\n\t\t\t\t\t\t\t\t\tname=\"exclamation-circle\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\ttype=\"font-awesome-5\"\r\n\t\t\t\t\t\t\t\t\tname=\"edit\"\r\n\t\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonChange={(e) => setRut(e.nativeEvent.text)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Text style={styles.inputTitle}>Teléfono de Contacto</Text>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tname=\"telefono\"\r\n\t\t\t\t\t\tcontainerStyle={styles.input}\r\n\t\t\t\t\t\tinputStyle={styles.inputText}\r\n\t\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\r\n\t\t\t\t\t\tautoCapitalize=\"none\"\r\n\t\t\t\t\t\tplaceholder=\"+56 9 1111 1111...\"\r\n\t\t\t\t\t\tdefaultValue={telefono}\r\n\t\t\t\t\t\tkeyboardType=\"phone-pad\"\r\n\t\t\t\t\t\tkeyboardAppearance=\"dark\"\r\n\t\t\t\t\t\tonChange={(e) => setTelefono(e.nativeEvent.text)}\r\n\t\t\t\t\t\trightIcon={\r\n\t\t\t\t\t\t\tformError.telefono ? (\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\ttype=\"font-awesome\"\r\n\t\t\t\t\t\t\t\t\tname=\"exclamation-circle\"\r\n\t\t\t\t\t\t\t\t\tcolor=\"red\"\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\t\ttype=\"Fontawesome5\"\r\n\t\t\t\t\t\t\t\t\tname=\"edit\"\r\n\t\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</View>\r\n\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\tonPress={() => handleReset()}\r\n\t\t\t\t\tstyle={styles.buttonFormReset}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Text style={styles.formReset}>Reiniciar Formulario</Text>\r\n\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t<View style={styles.quantityContainer}>\r\n\t\t\t\t\t<Text style={styles.title}>Cantidad</Text>\r\n\t\t\t\t\t<View style={styles.quantity}>\r\n\t\t\t\t\t\t<TouchableOpacity onPress={() => handleCantidad(cantidad - 1)}>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ttype=\"material-community\"\r\n\t\t\t\t\t\t\t\tname=\"minus-circle\"\r\n\t\t\t\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\t\t\t\tsize={35}\r\n\t\t\t\t\t\t\t\ticonStyle={styles.less}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t\t\t<Text style={styles.numero}>{cantidad}</Text>\r\n\t\t\t\t\t\t<TouchableOpacity onPress={() => handleCantidad(cantidad + 1)}>\r\n\t\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\t\ttype=\"material-community\"\r\n\t\t\t\t\t\t\t\tname=\"plus-circle\"\r\n\t\t\t\t\t\t\t\tcolor=\"white\"\r\n\t\t\t\t\t\t\t\tsize={35}\r\n\t\t\t\t\t\t\t\ticonStyle={styles.plus}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t\t</View>\r\n\t\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\t\tonPress={() => setCantidad(1)}\r\n\t\t\t\t\t\tstyle={styles.buttonReset}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Text style={styles.textReset}>Reiniciar</Text>\r\n\t\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View style={styles.submitContainer}>\r\n\t\t\t\t\t<TouchableOpacity onPress={comprar} style={styles.buttonPagar}>\r\n\t\t\t\t\t\t<Text style={styles.bonoSubmit}>\r\n\t\t\t\t\t\t\t{numberFormat(precioTotal)} Comprar\r\n\t\t\t\t\t\t</Text>\r\n\t\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t</View>\r\n\t\t\t\t<View style={styles.backContainer}>\r\n\t\t\t\t\t<TouchableOpacity\r\n\t\t\t\t\t\tonPress={() => navigation.navigate(\"Home\")}\r\n\t\t\t\t\t\tstyle={styles.comeBack}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\traised\r\n\t\t\t\t\t\t\tname=\"arrow-left\"\r\n\t\t\t\t\t\t\ttype=\"font-awesome\"\r\n\t\t\t\t\t\t\tcolor=\"#03255F\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</TouchableOpacity>\r\n\t\t\t\t</View>\r\n\t\t\t\t<Loading isVisible={loading} text=\"Procesando pago\" />\r\n\t\t\t</SafeAreaView>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst { width, height } = Dimensions.get(\"window\");\r\n\r\nconst styles = StyleSheet.create({\r\n\tcontainer: {\r\n\t\tflex: 14,\r\n\t},\r\n\theaderContainer: {\r\n\t\tflex: 1,\r\n\t},\r\n\timageContainer: {\r\n\t\tflex: 3,\r\n\t},\r\n\ttitleContainer: {\r\n\t\tflex: 1,\r\n\t},\r\n\tinputContainer: {\r\n\t\tflex: 5,\r\n\t\twidth: width,\r\n\t\talignItems: \"center\",\r\n\t\tborderRadius: 20,\r\n\t\tborderWidth: 1,\r\n\t\tborderColor: \"#34495E\",\r\n\t\tbackgroundColor: \"#A9B4C0\",\r\n\t\tpaddingVertical: 25,\r\n\t},\r\n\tquantityContainer: {\r\n\t\tflex: 2,\r\n\t\tbackgroundColor: \"#A9B4C0\",\r\n\t\tborderRadius: 20,\r\n\t\tborderWidth: 1,\r\n\t\tborderColor: \"#34495E\",\r\n\t},\r\n\tsubmitContainer: {\r\n\t\tflex: 1,\r\n\t},\r\n\tbackContainer: {\r\n\t\tflex: 1,\r\n\t},\r\n\tbonoImagen: {\r\n\t\twidth: width * 0.99,\r\n\t\theight: 200,\r\n\t\tresizeMode: \"contain\",\r\n\t\tborderRadius: 30,\r\n\t\talignSelf: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tmarginTop: 3,\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 20,\r\n\t\tcolor: \"#03255F\",\r\n\t\tfontWeight: \"bold\",\r\n\t\ttextAlign: \"center\",\r\n\t\tmargin: 5,\r\n\t},\r\n\tinputTitle: {\r\n\t\tfontSize: 15,\r\n\t\tcolor: \"#03255F\",\r\n\t\tfontWeight: \"bold\",\r\n\t\talignSelf: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t},\r\n\tinput: {\r\n\t\twidth: width * 0.75,\r\n\t\theight: height * 0.05,\r\n\t\tbackgroundColor: \"#FFF\",\r\n\t\tmargin: 8,\r\n\t\tborderRadius: 30,\r\n\t\tborderWidth: 1,\r\n\t\tborderColor: \"#34495E\",\r\n\t},\r\n\tinputText: {\r\n\t\tfontSize: 12,\r\n\t\tcolor: \"#03255F\",\r\n\t\tfontWeight: \"bold\",\r\n\t},\r\n\tinputUnderContainer: {\r\n\t\tborderBottomWidth: 0,\r\n\t},\r\n\ticonRight: {\r\n\t\tcolor: \"#c1c1c1\",\r\n\t},\r\n\tquantity: {\r\n\t\tflexDirection: \"row\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tmargin: 10,\r\n\t},\r\n\tplus: {\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tcolor: \"#03255f\",\r\n\t},\r\n\tless: {\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tcolor: \"#03255f\",\r\n\t},\r\n\tnumero: {\r\n\t\twidth: 75,\r\n\t\theight: 50,\r\n\t\tfontSize: 35,\r\n\t\tcolor: \"#03255f\",\r\n\t\tfontWeight: \"bold\",\r\n\t\ttextAlign: \"center\",\r\n\t\tmarginTop: -10,\r\n\t\tjustifyContent: \"center\",\r\n\t\tborderRadius: 20,\r\n\t\tborderWidth: 1,\r\n\t\tbackgroundColor: \"#ffffff\",\r\n\t\toverflow: \"hidden\",\r\n\t},\r\n\tbuttonReset: {\r\n\t\twidth: width * 0.5,\r\n\t\theight: 25,\r\n\t\tmarginBottom: 10,\r\n\t\tbackgroundColor: \"#03255F\",\r\n\t\talignItems: \"center\",\r\n\t\talignSelf: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tborderRadius: 30,\r\n\t},\r\n\ttextReset: {\r\n\t\tfontSize: 15,\r\n\t\tcolor: \"#FFF\",\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginTop: -3,\r\n\t},\r\n\tbuttonFormReset: {\r\n\t\tflexDirection: \"row\",\r\n\t\twidth: width * 0.5,\r\n\t\theight: 25,\r\n\t\tmarginVertical: 10,\r\n\t\tbackgroundColor: \"#03255F\",\r\n\t\talignItems: \"center\",\r\n\t\talignSelf: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tborderRadius: 20,\r\n\t},\r\n\tformReset: {\r\n\t\tcolor: \"#FFF\",\r\n\t\tfontWeight: \"bold\",\r\n\t\tmarginTop: -3,\r\n\t},\r\n\tbonoSubmit: {\r\n\t\tfontSize: 17.5,\r\n\t\tcolor: \"white\",\r\n\t\tfontWeight: \"bold\",\r\n\t},\r\n\tbuttonPagar: {\r\n\t\twidth: width * 0.5,\r\n\t\theight: height * 0.03,\r\n\t\tbackgroundColor: \"green\",\r\n\t\talignSelf: \"center\",\r\n\t\talignItems: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tborderRadius: 20,\r\n\t\tmargin: 20,\r\n\t},\r\n\tcomeBack: {\r\n\t\talignSelf: \"flex-start\",\r\n\t\tborderRadius: 25,\r\n\t\tmarginLeft: 15,\r\n\t\tmarginTop: -65,\r\n\t\tposition: \"absolute\",\r\n\t},\r\n});\r\n"]},"metadata":{},"sourceType":"module"}