{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/marceloimac/Documents/GitHub/JornadasApp/src/Screens/Donar/DonarUSer.js\";\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport HeaderView from \"../../components/Layouts/Header\";\nimport usePreference from \"../../Hooks/usePreferences\";\nimport firebase from \"../../../Firebase/Firebase\";\nimport moment from \"moment\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { Input, Icon } from \"react-native-elements\";\nimport Loading from \"../../Utils/Loading\";\nimport axios from \"axios\";\nimport AlcanciaImage from \"../../components/Layouts/AlcanciaImage\";\nexport default function DonarUser(props) {\n  var toastRef = props.toastRef;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      loading = _useState2[0],\n      setLoading = _useState2[1];\n\n  var navigation = useNavigation();\n\n  var _usePreference = usePreference(),\n      userFbData = _usePreference.userFbData;\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      formError = _useState4[0],\n      setFormError = _useState4[1];\n\n  var _useState5 = useState(userFbData.nombre),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nombre = _useState6[0],\n      setNombre = _useState6[1];\n\n  var _useState7 = useState(userFbData.apellido),\n      _useState8 = _slicedToArray(_useState7, 2),\n      apellido = _useState8[0],\n      setApellido = _useState8[1];\n\n  var _useState9 = useState(),\n      _useState10 = _slicedToArray(_useState9, 2),\n      aporte = _useState10[0],\n      setAporte = _useState10[1];\n\n  var _useState11 = useState(null),\n      _useState12 = _slicedToArray(_useState11, 2),\n      transbank = _useState12[0],\n      setTransbank = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      numeroOrden = _useState14[0],\n      setNumeroOrden = _useState14[1];\n\n  useEffect(function () {\n    firebase.database().ref(\"Transbank\").orderByChild(\"numero\").limitToLast(1).on(\"value\", function (snapshot) {\n      setNumeroOrden(snapshot.val());\n    });\n  }, []);\n\n  function submit() {\n    var orderToArray = [];\n    var errors = [];\n\n    if (!nombre || !apellido || !aporte) {\n      toastRef.current.show(\"Todos Los Campos Son Obligatorios.\");\n      if (!nombre) errors.nombre = true;\n      if (!apellido) errors.apellido = true;\n      if (!aporte) errors.aporte = true;\n    } else {\n      setLoading(true);\n      firebase.database().ref(\"Transbank\").orderByChild(\"numero\").limitToLast(1).on(\"value\", function (snapshot) {\n        setNumeroOrden(snapshot.val());\n      });\n\n      if (numeroOrden) {\n        Object.keys(numeroOrden).forEach(function (key, i) {\n          orderToArray[i] = numeroOrden[key];\n        });\n        var key = parseInt(orderToArray[0].numero_orden.split('-')[1]) + 1;\n        console.log(numeroOrden);\n        firebase.database().ref().child(\"Transbank/orden_\" + key).set({\n          item: \"Aporte\",\n          tipo: \"Usuario\",\n          aporte: aporte,\n          nombre: nombre,\n          apellido: apellido,\n          telefono: userFbData.telefono,\n          fecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n          numero_orden: 'JMAGALLANICAS-' + key,\n          numero: key,\n          estado_de_pago: \"Pendiente\",\n          uid: userFbData.uid,\n          plataforma: \"App\",\n          email: userFbData.email\n        });\n        firebase.database().ref().child(\"Users/\" + userFbData.uid + \"/aportes/\" + key).set({\n          aporte: aporte,\n          nombre: nombre,\n          apellido: apellido,\n          telefono: userFbData.telefono,\n          fecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n          numero_orden: 'JMAGALLANICAS-' + key,\n          estado_de_pago: \"Pendiente\",\n          uid: userFbData.uid,\n          email: userFbData.email\n        });\n        firebase.database().ref().child(\"Donaciones/\" + key).set({\n          tipo: \"Usuario\",\n          aporte: aporte,\n          nombre: nombre,\n          apellido: apellido,\n          telefono: userFbData.telefono,\n          fecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n          numero_orden: 'JMAGALLANICAS-' + key,\n          estado_de_pago: \"Pendiente\",\n          uid: userFbData.uid,\n          email: userFbData.email,\n          plataforma: \"App\"\n        }).then(function (res) {\n          axios({\n            method: \"post\",\n            url: \"https://appjornadasmagallanicas.cl/api/api/transactions\",\n            data: {\n              orden_compra: 'JMAGALLANICAS-' + key,\n              sessionID: \"DonacionApp\",\n              monto: aporte,\n              cantidad: 1,\n              nombre: nombre,\n              apellido: apellido,\n              email: userFbData.email,\n              uid: userFbData.uid\n            }\n          }).then(function (response) {\n            setTransbank(response.data);\n            navigation.navigate(\"Pago Aporte\", {\n              transbank: response.data,\n              orden_de_compra: key\n            });\n            setLoading(false);\n          });\n          handleReset();\n        }).catch(function (err) {\n          setLoading(false);\n          toastRef.current.show(\"Ha ocurrido un problema, intente nuevamente.\");\n        });\n      } else {\n        setLoading(false);\n        toastRef.current.show(\"Ha ocurrido un problema, intente nuevamente.\");\n      }\n    }\n\n    setFormError(errors);\n  }\n\n  var handleReset = function handleReset() {\n    setNombre(userFbData.nombre);\n    setApellido(userFbData.apellido);\n    setAporte(\"\");\n  };\n\n  return React.createElement(SafeAreaView, {\n    style: styles.mainView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: styles.headerContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 4\n    }\n  }, React.createElement(HeaderView, {\n    props: props,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  })), React.createElement(View, {\n    style: styles.imageContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 4\n    }\n  }, React.createElement(AlcanciaImage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 5\n    }\n  })), React.createElement(View, {\n    style: styles.titleContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 4\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 5\n    }\n  }, \"Aporte\")), React.createElement(View, {\n    style: styles.inputContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 4\n    }\n  }, React.createElement(Text, {\n    style: styles.inputTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 5\n    }\n  }, \"Nombre(s)\"), React.createElement(Input, {\n    name: \"nombre\",\n    containerStyle: styles.input,\n    inputStyle: styles.inputText,\n    inputContainerStyle: styles.inputUnderContainer,\n    autoCapitalize: \"none\",\n    textContentType: \"username\",\n    placeholder: \"Fran...\",\n    defaultValue: nombre,\n    onChange: function onChange(e) {\n      return setNombre(e.nativeEvent.text);\n    },\n    rightIcon: formError.nombre ? React.createElement(Icon, {\n      type: \"font-awesome\",\n      name: \"exclamation-circle\",\n      color: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 8\n      }\n    }) : React.createElement(Icon, {\n      type: \"Fontawesome5\",\n      name: \"edit\",\n      iconStyle: styles.iconRight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 8\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 5\n    }\n  }), React.createElement(Text, {\n    style: styles.inputTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 5\n    }\n  }, \"apellido(s)\"), React.createElement(Input, {\n    name: \"apellido\",\n    containerStyle: styles.input,\n    inputStyle: styles.inputText,\n    inputContainerStyle: styles.inputUnderContainer,\n    autoCapitalize: \"none\",\n    textContentType: \"middleName\",\n    placeholder: \"Zun...\",\n    defaultValue: apellido,\n    onChange: function onChange(e) {\n      return setApellido(e.nativeEvent.text);\n    },\n    rightIcon: formError.apellido ? React.createElement(Icon, {\n      type: \"font-awesome\",\n      name: \"exclamation-circle\",\n      color: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 8\n      }\n    }) : React.createElement(Icon, {\n      type: \"Fontawesome5\",\n      name: \"edit\",\n      iconStyle: styles.iconRight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 8\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 5\n    }\n  }), React.createElement(Text, {\n    style: styles.inputTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 5\n    }\n  }, \"Aporte\"), React.createElement(Input, {\n    name: \"aporte\",\n    containerStyle: styles.input,\n    inputStyle: styles.inputText,\n    inputContainerStyle: styles.inputUnderContainer,\n    autoCapitalize: \"none\",\n    placeholder: \"Ingrese Aporte...\",\n    keyboardType: \"numeric\",\n    defaultValue: aporte,\n    onChange: function onChange(e) {\n      return setAporte(e.nativeEvent.text);\n    },\n    rightIcon: formError.aporte ? React.createElement(Icon, {\n      type: \"font-awesome\",\n      name: \"exclamation-circle\",\n      color: \"red\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 8\n      }\n    }) : React.createElement(Icon, {\n      type: \"Fontawesome5\",\n      name: \"edit\",\n      iconStyle: styles.iconRight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 8\n      }\n    }),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 5\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return handleReset();\n    },\n    style: styles.buttonFormReset,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 4\n    }\n  }, React.createElement(Text, {\n    style: styles.formReset,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 5\n    }\n  }, \"Reiniciar Formulario\")), React.createElement(View, {\n    style: styles.submitContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 4\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: submit,\n    style: styles.buttonPagar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.textSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 6\n    }\n  }, \"Donar\"))), React.createElement(View, {\n    style: styles.backContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 4\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate(\"Home\");\n    },\n    style: styles.comeBack,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 5\n    }\n  }, React.createElement(Icon, {\n    raised: true,\n    name: \"arrow-left\",\n    type: \"font-awesome\",\n    color: \"#03255F\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 6\n    }\n  }))), React.createElement(Loading, {\n    isVisible: loading,\n    text: \"procesando.\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 4\n    }\n  }));\n}\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    width = _Dimensions$get.width,\n    height = _Dimensions$get.height;\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 11\n  },\n  headerContainer: {\n    flex: 1\n  },\n  imageContainer: {\n    flex: 2\n  },\n  titleContainer: {\n    flex: 1\n  },\n  inputContainer: {\n    flex: 5,\n    width: width,\n    alignItems: \"center\",\n    borderRadius: 20,\n    borderWidth: 1,\n    borderColor: \"#34495E\",\n    backgroundColor: \"#A9B4C0\",\n    paddingVertical: 25\n  },\n  submitContainer: {\n    flex: 1\n  },\n  backContainer: {\n    flex: 1\n  },\n  title: {\n    fontSize: 20,\n    color: \"#03255F\",\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    margin: 5\n  },\n  inputTitle: {\n    fontSize: 15,\n    color: \"#03255F\",\n    fontWeight: \"bold\",\n    alignSelf: \"center\",\n    justifyContent: \"center\"\n  },\n  input: {\n    width: width * 0.75,\n    height: height * 0.05,\n    backgroundColor: \"#FFF\",\n    margin: 8,\n    borderRadius: 30,\n    borderWidth: 1,\n    borderColor: \"#34495E\"\n  },\n  inputText: {\n    fontSize: 12,\n    color: \"#03255F\",\n    fontWeight: \"bold\"\n  },\n  inputUnderContainer: {\n    borderBottomWidth: 0\n  },\n  iconRight: {\n    color: \"#c1c1c1\"\n  },\n  error: {\n    borderColor: \"#940c0c\",\n    borderWidth: 1,\n    borderBottomColor: \"#940c0c\",\n    borderBottomWidth: 1,\n    borderRadius: 5\n  },\n  textSubmit: {\n    fontSize: 17.5,\n    color: \"white\",\n    fontWeight: \"bold\"\n  },\n  buttonFormReset: {\n    flexDirection: \"row\",\n    width: width * 0.5,\n    height: height * 0.04,\n    marginTop: 20,\n    backgroundColor: \"#03255F\",\n    alignItems: \"center\",\n    alignSelf: \"center\",\n    justifyContent: \"center\",\n    borderRadius: 20\n  },\n  formReset: {\n    fontSize: 15,\n    color: \"#FFF\",\n    fontWeight: \"bold\",\n    marginTop: -3\n  },\n  buttonPagar: {\n    width: width * 0.5,\n    height: height * 0.04,\n    backgroundColor: \"green\",\n    alignSelf: \"center\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    borderRadius: 20,\n    margin: 10\n  },\n  comeBack: {\n    alignSelf: \"flex-start\",\n    borderRadius: 25,\n    marginLeft: 15,\n    marginTop: -70,\n    position: \"absolute\"\n  }\n});","map":{"version":3,"sources":["/Users/marceloimac/Documents/GitHub/JornadasApp/src/Screens/Donar/DonarUSer.js"],"names":["React","useState","useEffect","HeaderView","usePreference","firebase","moment","useNavigation","Input","Icon","Loading","axios","AlcanciaImage","DonarUser","props","toastRef","loading","setLoading","navigation","userFbData","formError","setFormError","nombre","setNombre","apellido","setApellido","aporte","setAporte","transbank","setTransbank","numeroOrden","setNumeroOrden","database","ref","orderByChild","limitToLast","on","snapshot","val","submit","orderToArray","errors","current","show","Object","keys","forEach","key","i","parseInt","numero_orden","split","console","log","child","set","item","tipo","telefono","fecha","format","numero","estado_de_pago","uid","plataforma","email","then","res","method","url","data","orden_compra","sessionID","monto","cantidad","response","navigate","orden_de_compra","handleReset","catch","err","styles","mainView","headerContainer","imageContainer","titleContainer","title","inputContainer","inputTitle","input","inputText","inputUnderContainer","e","nativeEvent","text","iconRight","buttonFormReset","formReset","submitContainer","buttonPagar","textSubmit","backContainer","comeBack","Dimensions","get","width","height","StyleSheet","create","container","flex","alignItems","borderRadius","borderWidth","borderColor","backgroundColor","paddingVertical","fontSize","color","fontWeight","textAlign","margin","alignSelf","justifyContent","borderBottomWidth","error","borderBottomColor","flexDirection","marginTop","marginLeft","position"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport {\n\tView,\n\tText,\n\tTouchableOpacity,\n\tDimensions,\n\tStyleSheet,\n\tSafeAreaView,\n} from \"react-native\";\nimport HeaderView from \"../../components/Layouts/Header\";\nimport usePreference from \"../../Hooks/usePreferences\";\nimport firebase from \"../../../Firebase/Firebase\";\nimport moment from \"moment\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { Input, Icon } from \"react-native-elements\";\nimport Loading from \"../../Utils/Loading\";\nimport axios from \"axios\";\nimport AlcanciaImage from \"../../components/Layouts/AlcanciaImage\";\n\nexport default function DonarUser(props) {\n\tconst { toastRef } = props;\n\tconst [loading, setLoading] = useState(false);\n\tconst navigation = useNavigation();\n\tconst { userFbData } = usePreference();\n\tconst [formError, setFormError] = useState({});\n\tconst [nombre, setNombre] = useState(userFbData.nombre);\n\tconst [apellido, setApellido] = useState(userFbData.apellido);\n\tconst [aporte, setAporte] = useState();\n\tconst [transbank, setTransbank] = useState(null);\n\tconst [numeroOrden, setNumeroOrden] = useState();\n\n\tuseEffect(() => {\n\t\tfirebase\n\t\t\t.database()\n\t\t\t.ref(\"Transbank\")\n\t\t\t.orderByChild(\"numero\")\n\t\t\t.limitToLast(1)\n\t\t\t.on(\"value\", (snapshot) => {\n\t\t\t\tsetNumeroOrden(snapshot.val());\n\t\t\t});\n\t}, []);\n\n\tfunction submit() {\n\t\tlet orderToArray = [];\n\t\tlet errors = [];\n\t\tif (!nombre || !apellido || !aporte) {\n\t\t\ttoastRef.current.show(\"Todos Los Campos Son Obligatorios.\");\n\t\t\tif (!nombre) errors.nombre = true;\n\t\t\tif (!apellido) errors.apellido = true;\n\t\t\tif (!aporte) errors.aporte = true;\n\t\t} else {\n\t\t\tsetLoading(true);\n\t\t\tfirebase\n\t\t\t\t.database()\n\t\t\t\t.ref(\"Transbank\")\n\t\t\t\t.orderByChild(\"numero\")\n\t\t\t\t.limitToLast(1)\n\t\t\t\t.on(\"value\", (snapshot) => {\n\t\t\t\t\tsetNumeroOrden(snapshot.val());\n\t\t\t\t});\n\t\t\tif (numeroOrden) {\n\t\t\t\tObject.keys(numeroOrden).forEach((key, i) => {\n\t\t\t\t\torderToArray[i] = numeroOrden[key];\n\t\t\t\t});\n\t\t\t\tlet key = parseInt(orderToArray[0].numero_orden.split('-')[1]) + 1;\n\t\t\t\tconsole.log(numeroOrden);\n\t\t\t\tfirebase\n\t\t\t\t\t.database()\n\t\t\t\t\t.ref()\n\t\t\t\t\t.child(`Transbank/orden_${key}`)\n\t\t\t\t\t.set({\n\t\t\t\t\t\titem: \"Aporte\",\n\t\t\t\t\t\ttipo: \"Usuario\",\n\t\t\t\t\t\taporte: aporte,\n\t\t\t\t\t\tnombre: nombre,\n\t\t\t\t\t\tapellido: apellido,\n\t\t\t\t\t\ttelefono: userFbData.telefono,\n\t\t\t\t\t\tfecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n\t\t\t\t\t\tnumero_orden:  'JMAGALLANICAS-' + key,\n\t\t\t\t\t\tnumero: key,\n\t\t\t\t\t\testado_de_pago: \"Pendiente\",\n\t\t\t\t\t\tuid: userFbData.uid,\n\t\t\t\t\t\tplataforma: \"App\",\n\t\t\t\t\t\temail: userFbData.email,\n\t\t\t\t\t});\n\t\t\t\tfirebase\n\t\t\t\t\t.database()\n\t\t\t\t\t.ref()\n\t\t\t\t\t.child(`Users/${userFbData.uid}/aportes/${key}`)\n\t\t\t\t\t.set({\n\t\t\t\t\t\taporte: aporte,\n\t\t\t\t\t\tnombre: nombre,\n\t\t\t\t\t\tapellido: apellido,\n\t\t\t\t\t\ttelefono: userFbData.telefono,\n\t\t\t\t\t\tfecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n\t\t\t\t\t\tnumero_orden:  'JMAGALLANICAS-' + key,\n\t\t\t\t\t\testado_de_pago: \"Pendiente\",\n\t\t\t\t\t\tuid: userFbData.uid,\n\t\t\t\t\t\temail: userFbData.email,\n\t\t\t\t\t});\n\n\t\t\t\tfirebase\n\t\t\t\t\t.database()\n\t\t\t\t\t.ref()\n\t\t\t\t\t.child(`Donaciones/${key}`)\n\t\t\t\t\t.set({\n\t\t\t\t\t\ttipo: \"Usuario\",\n\t\t\t\t\t\taporte: aporte,\n\t\t\t\t\t\tnombre: nombre,\n\t\t\t\t\t\tapellido: apellido,\n\t\t\t\t\t\ttelefono: userFbData.telefono,\n\t\t\t\t\t\tfecha: moment().format(\"DD-MM-YYYY h:mm:ss a\"),\n\t\t\t\t\t\tnumero_orden:  'JMAGALLANICAS-' + key,\n\t\t\t\t\t\testado_de_pago: \"Pendiente\",\n\t\t\t\t\t\tuid: userFbData.uid,\n\t\t\t\t\t\temail: userFbData.email,\n\t\t\t\t\t\tplataforma: \"App\",\n\t\t\t\t\t})\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\taxios({\n\t\t\t\t\t\t\tmethod: \"post\",\n\t\t\t\t\t\t\turl: \"https://appjornadasmagallanicas.cl/api/api/transactions\",\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\torden_compra:  'JMAGALLANICAS-' + key,\n\t\t\t\t\t\t\t\tsessionID: \"DonacionApp\",\n\t\t\t\t\t\t\t\tmonto: aporte,\n\t\t\t\t\t\t\t\tcantidad: 1,\n\t\t\t\t\t\t\t\tnombre: nombre,\n\t\t\t\t\t\t\t\tapellido: apellido,\n\t\t\t\t\t\t\t\temail: userFbData.email,\n\t\t\t\t\t\t\t\tuid: userFbData.uid,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}).then((response) => {\n\t\t\t\t\t\t\tsetTransbank(response.data);\n\t\t\t\t\t\t\tnavigation.navigate(\"Pago Aporte\", { transbank: response.data, orden_de_compra: key });\n\t\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\t});\n\t\t\t\t\t\thandleReset();\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\ttoastRef.current.show(\n\t\t\t\t\t\t\t\"Ha ocurrido un problema, intente nuevamente.\"\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetLoading(false);\n\t\t\t\ttoastRef.current.show(\"Ha ocurrido un problema, intente nuevamente.\");\n\t\t\t}\n\t\t}\n\t\tsetFormError(errors);\n\t}\n\n\tconst handleReset = () => {\n\t\tsetNombre(userFbData.nombre);\n\t\tsetApellido(userFbData.apellido);\n\t\tsetAporte(\"\");\n\t};\n\n\treturn (\n\t\t<SafeAreaView style={styles.mainView}>\n\t\t\t<View style={styles.headerContainer}>\n\t\t\t\t<HeaderView props={props} />\n\t\t\t</View>\n\t\t\t<View style={styles.imageContainer}>\n\t\t\t\t<AlcanciaImage />\n\t\t\t</View>\n\t\t\t<View style={styles.titleContainer}>\n\t\t\t\t<Text style={styles.title}>Aporte</Text>\n\t\t\t</View>\n\t\t\t<View style={styles.inputContainer}>\n\t\t\t\t<Text style={styles.inputTitle}>Nombre(s)</Text>\n\t\t\t\t<Input\n\t\t\t\t\tname=\"nombre\"\n\t\t\t\t\tcontainerStyle={styles.input}\n\t\t\t\t\tinputStyle={styles.inputText}\n\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\ttextContentType=\"username\"\n\t\t\t\t\tplaceholder=\"Fran...\"\n\t\t\t\t\tdefaultValue={nombre}\n\t\t\t\t\tonChange={(e) => setNombre(e.nativeEvent.text)}\n\t\t\t\t\trightIcon={\n\t\t\t\t\t\tformError.nombre ? (\n\t\t\t\t\t\t\t<Icon type=\"font-awesome\" name=\"exclamation-circle\" color=\"red\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ttype=\"Fontawesome5\"\n\t\t\t\t\t\t\t\tname=\"edit\"\n\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Text style={styles.inputTitle}>apellido(s)</Text>\n\t\t\t\t<Input\n\t\t\t\t\tname=\"apellido\"\n\t\t\t\t\tcontainerStyle={styles.input}\n\t\t\t\t\tinputStyle={styles.inputText}\n\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\ttextContentType=\"middleName\"\n\t\t\t\t\tplaceholder=\"Zun...\"\n\t\t\t\t\tdefaultValue={apellido}\n\t\t\t\t\tonChange={(e) => setApellido(e.nativeEvent.text)}\n\t\t\t\t\trightIcon={\n\t\t\t\t\t\tformError.apellido ? (\n\t\t\t\t\t\t\t<Icon type=\"font-awesome\" name=\"exclamation-circle\" color=\"red\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ttype=\"Fontawesome5\"\n\t\t\t\t\t\t\t\tname=\"edit\"\n\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Text style={styles.inputTitle}>Aporte</Text>\n\t\t\t\t<Input\n\t\t\t\t\tname=\"aporte\"\n\t\t\t\t\tcontainerStyle={styles.input}\n\t\t\t\t\tinputStyle={styles.inputText}\n\t\t\t\t\tinputContainerStyle={styles.inputUnderContainer}\n\t\t\t\t\tautoCapitalize=\"none\"\n\t\t\t\t\tplaceholder=\"Ingrese Aporte...\"\n\t\t\t\t\tkeyboardType=\"numeric\"\n\t\t\t\t\tdefaultValue={aporte}\n\t\t\t\t\tonChange={(e) => setAporte(e.nativeEvent.text)}\n\t\t\t\t\trightIcon={\n\t\t\t\t\t\tformError.aporte ? (\n\t\t\t\t\t\t\t<Icon type=\"font-awesome\" name=\"exclamation-circle\" color=\"red\" />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\ttype=\"Fontawesome5\"\n\t\t\t\t\t\t\t\tname=\"edit\"\n\t\t\t\t\t\t\t\ticonStyle={styles.iconRight}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</View>\n\t\t\t<TouchableOpacity\n\t\t\t\tonPress={() => handleReset()}\n\t\t\t\tstyle={styles.buttonFormReset}\n\t\t\t>\n\t\t\t\t<Text style={styles.formReset}>Reiniciar Formulario</Text>\n\t\t\t</TouchableOpacity>\n\t\t\t<View style={styles.submitContainer}>\n\t\t\t\t<TouchableOpacity onPress={submit} style={styles.buttonPagar}>\n\t\t\t\t\t<Text style={styles.textSubmit}>Donar</Text>\n\t\t\t\t</TouchableOpacity>\n\t\t\t</View>\n\t\t\t<View style={styles.backContainer}>\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tonPress={() => navigation.navigate(\"Home\")}\n\t\t\t\t\tstyle={styles.comeBack}\n\t\t\t\t>\n\t\t\t\t\t<Icon raised name=\"arrow-left\" type=\"font-awesome\" color=\"#03255F\" />\n\t\t\t\t</TouchableOpacity>\n\t\t\t</View>\n\t\t\t<Loading isVisible={loading} text=\"procesando.\" />\n\t\t</SafeAreaView>\n\t);\n}\n\nconst { width, height } = Dimensions.get(\"window\");\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tflex: 11,\n\t},\n\theaderContainer: {\n\t\tflex: 1,\n\t},\n\timageContainer: {\n\t\tflex: 2,\n\t},\n\ttitleContainer: {\n\t\tflex: 1,\n\t},\n\tinputContainer: {\n\t\tflex: 5,\n\t\twidth: width,\n\t\talignItems: \"center\",\n\t\tborderRadius: 20,\n\t\tborderWidth: 1,\n\t\tborderColor: \"#34495E\",\n\t\tbackgroundColor: \"#A9B4C0\",\n\t\tpaddingVertical: 25,\n\t},\n\tsubmitContainer: {\n\t\tflex: 1,\n\t},\n\tbackContainer: {\n\t\tflex: 1,\n\t},\n\ttitle: {\n\t\tfontSize: 20,\n\t\tcolor: \"#03255F\",\n\t\tfontWeight: \"bold\",\n\t\ttextAlign: \"center\",\n\t\tmargin: 5,\n\t},\n\tinputTitle: {\n\t\tfontSize: 15,\n\t\tcolor: \"#03255F\",\n\t\tfontWeight: \"bold\",\n\t\talignSelf: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\tinput: {\n\t\twidth: width * 0.75,\n\t\theight: height * 0.05,\n\t\tbackgroundColor: \"#FFF\",\n\t\tmargin: 8,\n\t\tborderRadius: 30,\n\t\tborderWidth: 1,\n\t\tborderColor: \"#34495E\",\n\t},\n\tinputText: {\n\t\tfontSize: 12,\n\t\tcolor: \"#03255F\",\n\t\tfontWeight: \"bold\",\n\t},\n\tinputUnderContainer: {\n\t\tborderBottomWidth: 0,\n\t},\n\ticonRight: {\n\t\tcolor: \"#c1c1c1\",\n\t},\n\terror: {\n\t\tborderColor: \"#940c0c\",\n\t\tborderWidth: 1,\n\t\tborderBottomColor: \"#940c0c\",\n\t\tborderBottomWidth: 1,\n\t\tborderRadius: 5,\n\t},\n\ttextSubmit: {\n\t\tfontSize: 17.5,\n\t\tcolor: \"white\",\n\t\tfontWeight: \"bold\",\n\t},\n\tbuttonFormReset: {\n\t\tflexDirection: \"row\",\n\t\twidth: width * 0.5,\n\t\theight: height * 0.04,\n\t\tmarginTop: 20,\n\t\tbackgroundColor: \"#03255F\",\n\t\talignItems: \"center\",\n\t\talignSelf: \"center\",\n\t\tjustifyContent: \"center\",\n\t\tborderRadius: 20,\n\t},\n\tformReset: {\n\t\tfontSize: 15,\n\t\tcolor: \"#FFF\",\n\t\tfontWeight: \"bold\",\n\t\tmarginTop: -3,\n\t},\n\tbuttonPagar: {\n\t\twidth: width * 0.5,\n\t\theight: height * 0.04,\n\t\tbackgroundColor: \"green\",\n\t\talignSelf: \"center\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t\tborderRadius: 20,\n\t\tmargin: 10,\n\t},\n\tcomeBack: {\n\t\talignSelf: \"flex-start\",\n\t\tborderRadius: 25,\n\t\tmarginLeft: 15,\n\t\tmarginTop: -70,\n\t\tposition: \"absolute\",\n\t},\n});\n"]},"metadata":{},"sourceType":"module"}